---
title: Развертывание контейнеров в Azure
description: Развертывание контейнеров в Azure с помощью реестра контейнеров Azure, службы Kubernetes Azure и Azure Dev Spaces.
ms.date: 04/13/2020
ms.openlocfilehash: 57a4739d39b8ad022d699d54255f56f16d305440
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895606"
---
# <a name="deploying-containers-in-azure"></a><span data-ttu-id="d59c6-103">Развертывание контейнеров в Azure</span><span class="sxs-lookup"><span data-stu-id="d59c6-103">Deploying containers in Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="d59c6-104">В этой главе мы обсуждали контейнеры и в главе 1.</span><span class="sxs-lookup"><span data-stu-id="d59c6-104">We've discussed containers in this chapter and in chapter 1.</span></span> <span data-ttu-id="d59c6-105">Мы увидели, что контейнеры предоставляют множество преимуществ для облачных приложений, включая переносимость.</span><span class="sxs-lookup"><span data-stu-id="d59c6-105">We've seen that containers provide many benefits to cloud-native applications, including portability.</span></span> <span data-ttu-id="d59c6-106">В облаке Azure вы можете развернуть одни и те же контейнерные службы в промежуточной и рабочей средах.</span><span class="sxs-lookup"><span data-stu-id="d59c6-106">In the Azure cloud, you can deploy the same containerized services across staging and production environments.</span></span> <span data-ttu-id="d59c6-107">Azure предоставляет несколько вариантов размещения этих контейнерных рабочих нагрузок:</span><span class="sxs-lookup"><span data-stu-id="d59c6-107">Azure provides several options for hosting these containerized workloads:</span></span>

- <span data-ttu-id="d59c6-108">Службы Azure Kubernetes (AKS)</span><span class="sxs-lookup"><span data-stu-id="d59c6-108">Azure Kubernetes Services (AKS)</span></span>
- <span data-ttu-id="d59c6-109">Экземпляр контейнера Azure (ACI).</span><span class="sxs-lookup"><span data-stu-id="d59c6-109">Azure Container Instance (ACI)</span></span>
- <span data-ttu-id="d59c6-110">Веб-приложения Azure для контейнеров</span><span class="sxs-lookup"><span data-stu-id="d59c6-110">Azure Web Apps for Containers</span></span>

## <a name="azure-container-registry"></a><span data-ttu-id="d59c6-111">Реестр контейнеров Azure</span><span class="sxs-lookup"><span data-stu-id="d59c6-111">Azure Container Registry</span></span>

<span data-ttu-id="d59c6-112">Когда вы контейнеризация микрослужбу, вы сначала создаете контейнер сборки "Image".</span><span class="sxs-lookup"><span data-stu-id="d59c6-112">When containerizing a microservice, you first a build container "image."</span></span> <span data-ttu-id="d59c6-113">Образ является двоичным представлением кода службы, зависимостей и среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="d59c6-113">The image is a binary representation of the service code, dependencies, and runtime.</span></span> <span data-ttu-id="d59c6-114">Хотя вы можете вручную создать образ с помощью `Docker Build` команды из API DOCKER, лучшим подходом является создание его в рамках автоматизированного процесса сборки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-114">While you can manually create an image using the `Docker Build` command from the Docker API, a better approach is to create it as part of an automated build process.</span></span>

<span data-ttu-id="d59c6-115">После создания образы контейнеров хранятся в реестрах контейнеров.</span><span class="sxs-lookup"><span data-stu-id="d59c6-115">Once created, container images are stored in container registries.</span></span> <span data-ttu-id="d59c6-116">Они позволяют создавать и хранить образы контейнеров, а также управлять ими.</span><span class="sxs-lookup"><span data-stu-id="d59c6-116">They enable you to build, store, and manage container images.</span></span> <span data-ttu-id="d59c6-117">Существует множество доступных реестров, как открытых, так и закрытых.</span><span class="sxs-lookup"><span data-stu-id="d59c6-117">There are many registries available, both public and private.</span></span> <span data-ttu-id="d59c6-118">Реестр контейнеров Azure (запись контроля доступа) — это полностью управляемая служба реестра контейнеров в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="d59c6-118">Azure Container Registry (ACR) is a fully managed container registry service in the Azure cloud.</span></span> <span data-ttu-id="d59c6-119">Он сохраняет образы в сети Azure, уменьшая время на их развертывание на узлах контейнеров Azure.</span><span class="sxs-lookup"><span data-stu-id="d59c6-119">It persists your images inside the Azure network, reducing the time to deploy them to Azure container hosts.</span></span> <span data-ttu-id="d59c6-120">Их также можно защитить с помощью тех же процедур безопасности и идентификации, которые используются для других ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="d59c6-120">You can also secure them using the same security and identity procedures that you use for other Azure resources.</span></span>

<span data-ttu-id="d59c6-121">Реестр контейнеров Azure создается с помощью средств [портал Azure](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-portal), [Azure CLI](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-azure-cli)или [PowerShell](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-powershell).</span><span class="sxs-lookup"><span data-stu-id="d59c6-121">You create an Azure Container Registry using the [Azure portal](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-portal), [Azure CLI](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-azure-cli), or [PowerShell tools](https://docs.microsoft.com/azure/container-registry/container-registry-get-started-powershell).</span></span> <span data-ttu-id="d59c6-122">Создание реестра в Azure выполняется просто.</span><span class="sxs-lookup"><span data-stu-id="d59c6-122">Creating a registry in Azure is simple.</span></span> <span data-ttu-id="d59c6-123">Для этого требуется подписка Azure, Группа ресурсов и уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="d59c6-123">It requires an Azure subscription, resource group, and a unique name.</span></span> <span data-ttu-id="d59c6-124">На рис. 3-11 показаны основные параметры для создания реестра, который будет размещаться в `registryname.azurecr.io`.</span><span class="sxs-lookup"><span data-stu-id="d59c6-124">Figure 3-11 shows the basic options for creating a registry, which will be hosted at `registryname.azurecr.io`.</span></span>

![Создание реестра контейнеров](./media/create-container-registry.png)

<span data-ttu-id="d59c6-126">**Рис. 3-11**.</span><span class="sxs-lookup"><span data-stu-id="d59c6-126">**Figure 3-11**.</span></span> <span data-ttu-id="d59c6-127">Создание реестра контейнеров</span><span class="sxs-lookup"><span data-stu-id="d59c6-127">Create container registry</span></span>

<span data-ttu-id="d59c6-128">После создания реестра необходимо выполнить его проверку подлинности, прежде чем его можно будет использовать.</span><span class="sxs-lookup"><span data-stu-id="d59c6-128">Once you've created the registry, you'll need to authenticate with it before you can use it.</span></span> <span data-ttu-id="d59c6-129">Как правило, вы входите в реестр с помощью команды Azure CLI:</span><span class="sxs-lookup"><span data-stu-id="d59c6-129">Typically, you'll log into the registry using the Azure CLI command:</span></span>

```azurecli
az acr login --name *registryname*
```

<span data-ttu-id="d59c6-130">После проверки подлинности можно использовать команды DOCKER для отправки в нее образов контейнеров.</span><span class="sxs-lookup"><span data-stu-id="d59c6-130">Once authenticated, you can use docker commands to push container images to it.</span></span> <span data-ttu-id="d59c6-131">Однако перед тем, как это сделать, необходимо пометить образ полным именем (URL-адресом) сервера входа в систему контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="d59c6-131">Before you can do so, however, you must tag your image with the fully qualified name (URL) of your ACR login server.</span></span> <span data-ttu-id="d59c6-132">Он будет иметь формат *регистринаме*. azurecr.IO.</span><span class="sxs-lookup"><span data-stu-id="d59c6-132">It will have the format *registryname*.azurecr.io.</span></span>

```console
docker tag mycontainer myregistry.azurecr.io/mycontainer:v1
```

<span data-ttu-id="d59c6-133">После маркировки образа используйте `docker push` команду, чтобы передать образ в экземпляр записи контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="d59c6-133">After you've tagged the image, you use the `docker push` command to push the image to your ACR instance.</span></span>

```console
docker push myregistry.azurecr.io/mycontainer:v1
```

<span data-ttu-id="d59c6-134">После отправки образа в реестр рекомендуется удалить образ из локальной среды DOCKER, выполнив следующую команду:</span><span class="sxs-lookup"><span data-stu-id="d59c6-134">After you push an image to the registry, it's a good idea to remove the image from your local Docker environment, using this command:</span></span>

```console
docker rmi myregistry.azurecr.io/mycontainer:v1
```

<span data-ttu-id="d59c6-135">Рекомендуется вручную отправлять образы в реестр контейнеров.</span><span class="sxs-lookup"><span data-stu-id="d59c6-135">As a best practice, developers shouldn't manually push images to a container registry.</span></span> <span data-ttu-id="d59c6-136">Вместо этого этот процесс должен быть ответственным за создание конвейера сборки, определенного в средстве, например GitHub или Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="d59c6-136">Instead, a build pipeline defined in a tool like GitHub or Azure DevOps should be responsible for this process.</span></span> <span data-ttu-id="d59c6-137">Дополнительные сведения см. в [разделе, посвященном облаку, в машинном DevOps](devops.md).</span><span class="sxs-lookup"><span data-stu-id="d59c6-137">Learn more in the [Cloud-Native DevOps chapter](devops.md).</span></span>

## <a name="acr-tasks"></a><span data-ttu-id="d59c6-138">Задачи ACR</span><span class="sxs-lookup"><span data-stu-id="d59c6-138">ACR Tasks</span></span>

<span data-ttu-id="d59c6-139">[Задачи записи контроля](https://docs.microsoft.com/azure/container-registry/container-registry-tasks-overview) доступа — это набор функций, доступных в реестре контейнеров Azure.</span><span class="sxs-lookup"><span data-stu-id="d59c6-139">[ACR Tasks](https://docs.microsoft.com/azure/container-registry/container-registry-tasks-overview) is a set of features available from the Azure Container Registry.</span></span> <span data-ttu-id="d59c6-140">Он расширяет [цикл разработки внутреннего цикла](https://docs.microsoft.com/dotnet/architecture/containerized-lifecycle/design-develop-containerized-apps/docker-apps-inner-loop-workflow) , создавая образы контейнеров и управляя ими в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="d59c6-140">It extends your [inner-loop development cycle](https://docs.microsoft.com/dotnet/architecture/containerized-lifecycle/design-develop-containerized-apps/docker-apps-inner-loop-workflow) by building and managing container images in the Azure cloud.</span></span> <span data-ttu-id="d59c6-141">Вместо того, чтобы вызывать `docker build` и `docker push` локально на компьютере разработки, они автоматически обрабатываются задачами контроля доступа в облаке.</span><span class="sxs-lookup"><span data-stu-id="d59c6-141">Instead of invoking a `docker build` and `docker push` locally on your development machine, they're automatically handled by ACR Tasks in the cloud.</span></span>

<span data-ttu-id="d59c6-142">Следующая команда AZ CLI строит образ контейнера и отправляет его в запись контроля доступа:</span><span class="sxs-lookup"><span data-stu-id="d59c6-142">The following AZ CLI command both builds a container image and pushes it to ACR:</span></span>

```azurecli
# create a container registry
az acr create --resource-group myResourceGroup --name myContainerRegistry008 --sku Basic

# build container image in ACR and push it into your container regsitry
az acr build --image sample/hello-world:v1  --registry myContainerRegistry008 --file Dockerfile .
```

<span data-ttu-id="d59c6-143">Как видно из предыдущего блока команд, нет необходимости устанавливать на компьютер разработки приложение DOCKER Desktop.</span><span class="sxs-lookup"><span data-stu-id="d59c6-143">As you can see from the previous command block, there's no need to install Docker Desktop on your development machine.</span></span> <span data-ttu-id="d59c6-144">Кроме того, можно настроить триггеры задач записи контроля доступа для перестроения образов контейнеров как в исходном коде, так и в базовых обновлениях образа.</span><span class="sxs-lookup"><span data-stu-id="d59c6-144">Additionally, you can configure ACR Task triggers to rebuild containers images on both source code and base image updates.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="d59c6-145">Служба Azure Kubernetes</span><span class="sxs-lookup"><span data-stu-id="d59c6-145">Azure Kubernetes Service</span></span>

<span data-ttu-id="d59c6-146">В этой главе мы обсуждали службу Azure Kubernetes Service (AKS).</span><span class="sxs-lookup"><span data-stu-id="d59c6-146">We discussed Azure Kubernetes Service (AKS) at length in this chapter.</span></span> <span data-ttu-id="d59c6-147">Мы видели, что это де-факто контейнер Orchestrator, управляющий контейнерными приложениями в машинном облаке.</span><span class="sxs-lookup"><span data-stu-id="d59c6-147">We've seen that it's the de facto container orchestrator managing containerized cloud-native applications.</span></span>

<span data-ttu-id="d59c6-148">После развертывания образа в реестре, например записи контроля доступа, можно настроить AKS для автоматического извлечения и развертывания.</span><span class="sxs-lookup"><span data-stu-id="d59c6-148">Once you deploy an image to a registry, such as ACR, you can configure AKS to automatically pull and deploy it.</span></span> <span data-ttu-id="d59c6-149">С помощью конвейера CI/CD вы можете настроить стратегию [выпуска ранний](https://martinfowler.com/bliki/CanaryRelease.html) , чтобы снизить риск, связанный с быстро развертываемыми обновлениями.</span><span class="sxs-lookup"><span data-stu-id="d59c6-149">With a CI/CD pipeline in place, you might configure a  [canary release](https://martinfowler.com/bliki/CanaryRelease.html) strategy to minimize the risk involved when rapidly deploying updates.</span></span> <span data-ttu-id="d59c6-150">Новая версия приложения изначально настраивается в рабочей среде без маршрутизации трафика.</span><span class="sxs-lookup"><span data-stu-id="d59c6-150">The new version of the app is initially configured in production with no traffic routed to it.</span></span> <span data-ttu-id="d59c6-151">Затем система будет направлять небольшой процент пользователей на только что развернутую версию.</span><span class="sxs-lookup"><span data-stu-id="d59c6-151">Then, the system will route a small percentage of users to the newly deployed version.</span></span> <span data-ttu-id="d59c6-152">По мере того, как группа получает уверенность в новой версии, она может развернуть больше экземпляров и прекратить старую версию.</span><span class="sxs-lookup"><span data-stu-id="d59c6-152">As the team gains confidence in the new version, it can roll out more instances and retire the old.</span></span> <span data-ttu-id="d59c6-153">AKS легко поддерживает этот стиль развертывания.</span><span class="sxs-lookup"><span data-stu-id="d59c6-153">AKS easily supports this style of deployment.</span></span>

<span data-ttu-id="d59c6-154">Как и в случае с большинством ресурсов в Azure, вы можете создать кластер службы Kubernetes Azure с помощью портала, командной строки или средств автоматизации, таких как Helm или terraform.</span><span class="sxs-lookup"><span data-stu-id="d59c6-154">As with most resources in Azure, you can create an Azure Kubernetes Service cluster using the portal, command-line, or automation tools like Helm or Terraform.</span></span> <span data-ttu-id="d59c6-155">Чтобы начать работу с новым кластером, необходимо предоставить следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="d59c6-155">To get started with a new cluster, you need to provide the following information:</span></span>

- <span data-ttu-id="d59c6-156">Подписка Azure</span><span class="sxs-lookup"><span data-stu-id="d59c6-156">Azure subscription</span></span>
- <span data-ttu-id="d59c6-157">Группа ресурсов</span><span class="sxs-lookup"><span data-stu-id="d59c6-157">Resource group</span></span>
- <span data-ttu-id="d59c6-158">Имя кластера Kubernetes</span><span class="sxs-lookup"><span data-stu-id="d59c6-158">Kubernetes cluster name</span></span>
- <span data-ttu-id="d59c6-159">Регион</span><span class="sxs-lookup"><span data-stu-id="d59c6-159">Region</span></span>
- <span data-ttu-id="d59c6-160">Версия Kubernetes</span><span class="sxs-lookup"><span data-stu-id="d59c6-160">Kubernetes version</span></span>
- <span data-ttu-id="d59c6-161">Префикс DNS-имени</span><span class="sxs-lookup"><span data-stu-id="d59c6-161">DNS name prefix</span></span>
- <span data-ttu-id="d59c6-162">Размер узла</span><span class="sxs-lookup"><span data-stu-id="d59c6-162">Node size</span></span>
- <span data-ttu-id="d59c6-163">Число узлов</span><span class="sxs-lookup"><span data-stu-id="d59c6-163">Node count</span></span>

<span data-ttu-id="d59c6-164">Эти сведения достаточно для начала работы.</span><span class="sxs-lookup"><span data-stu-id="d59c6-164">This information is sufficient to get started.</span></span> <span data-ttu-id="d59c6-165">В рамках процесса создания портал Azure можно также настроить параметры для следующих функций кластера:</span><span class="sxs-lookup"><span data-stu-id="d59c6-165">As part of the creation process in the Azure portal, you can also configure options for the following features of your cluster:</span></span>

- <span data-ttu-id="d59c6-166">Масштабирование</span><span class="sxs-lookup"><span data-stu-id="d59c6-166">Scale</span></span>
- <span data-ttu-id="d59c6-167">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="d59c6-167">Authentication</span></span>
- <span data-ttu-id="d59c6-168">Сеть</span><span class="sxs-lookup"><span data-stu-id="d59c6-168">Networking</span></span>
- <span data-ttu-id="d59c6-169">Наблюдение</span><span class="sxs-lookup"><span data-stu-id="d59c6-169">Monitoring</span></span>
- <span data-ttu-id="d59c6-170">Tags</span><span class="sxs-lookup"><span data-stu-id="d59c6-170">Tags</span></span>

<span data-ttu-id="d59c6-171">Это [Краткое руководство содержит инструкции по развертыванию кластера AKS с помощью портал Azure](https://docs.microsoft.com/azure/aks/kubernetes-walkthrough-portal).</span><span class="sxs-lookup"><span data-stu-id="d59c6-171">This [quickstart walks through deploying an AKS cluster using the Azure portal](https://docs.microsoft.com/azure/aks/kubernetes-walkthrough-portal).</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="d59c6-172">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="d59c6-172">Azure Dev Spaces</span></span>

<span data-ttu-id="d59c6-173">Облачные приложения могут быстро увеличиваться и быть сложными, что требует выполнения значительных вычислений.</span><span class="sxs-lookup"><span data-stu-id="d59c6-173">Cloud-native applications can quickly grow large and complex, requiring significant compute resources to run.</span></span> <span data-ttu-id="d59c6-174">В этих сценариях приложение не может размещаться на компьютере разработки (особенно на ноутбуке).</span><span class="sxs-lookup"><span data-stu-id="d59c6-174">In these scenarios, the entire application can't be hosted on a development machine (especially a laptop).</span></span> <span data-ttu-id="d59c6-175">Azure Dev Spaces предназначен для решения этой проблемы с помощью AKS.</span><span class="sxs-lookup"><span data-stu-id="d59c6-175">Azure Dev Spaces is designed to address this problem using AKS.</span></span> <span data-ttu-id="d59c6-176">Он позволяет разработчикам работать с локальной версией своих служб при размещении остального приложения в кластере AKS Development.</span><span class="sxs-lookup"><span data-stu-id="d59c6-176">It enables developers to work with a local version of their services while hosting the rest of the application in an AKS development cluster.</span></span>

<span data-ttu-id="d59c6-177">Разработчики совместно используют выполняющийся экземпляр (Development) в кластере AKS, который содержит все контейнерные приложения.</span><span class="sxs-lookup"><span data-stu-id="d59c6-177">Developers share a running (development) instance in an AKS cluster that contains the entire containerized application.</span></span> <span data-ttu-id="d59c6-178">Но они используют личные пространства, настроенные на своем компьютере, чтобы локально разрабатывать свои службы.</span><span class="sxs-lookup"><span data-stu-id="d59c6-178">But they use personal spaces set up on their machine to locally develop their services.</span></span> <span data-ttu-id="d59c6-179">При готовности они проверяются от сквозного кластера в кластере AKS без репликации зависимостей.</span><span class="sxs-lookup"><span data-stu-id="d59c6-179">When ready, they test from end-to-end in the AKS cluster - without replicating dependencies.</span></span> <span data-ttu-id="d59c6-180">Azure Dev Spaces выполняет слияние кода с локального компьютера со службами в AKS.</span><span class="sxs-lookup"><span data-stu-id="d59c6-180">Azure Dev Spaces merges code from the local machine with services in AKS.</span></span> <span data-ttu-id="d59c6-181">Разработчики могут быстро выполнять итерацию и отладку кода непосредственно в Kubernetes с помощью Visual Studio или Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="d59c6-181">Developers can rapidly iterate and debug code directly in Kubernetes using Visual Studio or Visual Studio Code.</span></span>

<span data-ttu-id="d59c6-182">Чтобы понять ценность Azure Dev Spaces, предоставьте мне общий доступ к этому предложению из Гейб Монрой, а также ведущих контейнеров на Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="d59c6-182">To understand the value of Azure Dev Spaces, let me share this quotation from Gabe Monroy, PM Lead of Containers at Microsoft Azure:</span></span>

> <span data-ttu-id="d59c6-183">"Представьте, что вы являетесь новым сотрудником, который пытается исправить ошибку в сложном приложении микрослужб, состоящем из десятков компонентов, каждый из которых имеет собственную конфигурацию и резервные службы.</span><span class="sxs-lookup"><span data-stu-id="d59c6-183">"Imagine you're a new employee trying to fix a bug in a complex microservices application consisting of dozens of components, each with their own configuration and backing services.</span></span> <span data-ttu-id="d59c6-184">Чтобы приступить к работе, необходимо настроить локальную среду разработки, чтобы она могла имитировать работу, включая настройку интегрированной среды разработки, сборку цепочки инструментов, контейнерные зависимости служб, локальную среду Kubernetes, макеты для резервных служб и многое другое.</span><span class="sxs-lookup"><span data-stu-id="d59c6-184">To get started, you must configure your local development environment so that it can mimic production including setting up your IDE, building tool chain, containerized service dependencies, a local Kubernetes environment, mocks for backing services, and more.</span></span> <span data-ttu-id="d59c6-185">Во время настройки среды разработки исправление этой первой ошибки может занять дни.</span><span class="sxs-lookup"><span data-stu-id="d59c6-185">With all the time involved setting up your development environment, fixing that first bug could take days.</span></span>
> <span data-ttu-id="d59c6-186">Также можно использовать пространства разработки и AKS ".</span><span class="sxs-lookup"><span data-stu-id="d59c6-186">Or you could use Dev Spaces and AKS."</span></span>

<span data-ttu-id="d59c6-187">Процесс работы с Azure Dev Spaces состоит из следующих этапов.</span><span class="sxs-lookup"><span data-stu-id="d59c6-187">The process for working with Azure Dev Spaces involves the following steps:</span></span>

1. <span data-ttu-id="d59c6-188">Создайте пространство разработки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-188">Create the dev space.</span></span>
2. <span data-ttu-id="d59c6-189">Настройте корневое пространство разработки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-189">Configure the root dev space.</span></span>
3. <span data-ttu-id="d59c6-190">Настройка дочернего пространства разработки (для собственной версии системы).</span><span class="sxs-lookup"><span data-stu-id="d59c6-190">Configure a child dev space (for your own version of the system).</span></span>
4. <span data-ttu-id="d59c6-191">Подключитесь к пространству разработки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-191">Connect to the dev space.</span></span>

<span data-ttu-id="d59c6-192">Все эти действия можно выполнить с помощью Azure CLI и новых `azds` средств командной строки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-192">All of these steps can be performed using the Azure CLI and new  `azds` command-line tools.</span></span> <span data-ttu-id="d59c6-193">Например, чтобы создать новое пространство разработки Azure для данного кластера Kubernetes, используйте следующую команду:</span><span class="sxs-lookup"><span data-stu-id="d59c6-193">For example, to create a new Azure Dev Space for a given Kubernetes cluster, you would use a command like this one:</span></span>

```azurecli
az aks use-dev-spaces -g my-aks-resource-group -n MyAKSCluster
```

<span data-ttu-id="d59c6-194">Затем можно использовать `azds prep` команду, чтобы создать необходимые ресурсы диаграммы DOCKER и Helm для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="d59c6-194">Next, you can use the `azds prep` command to generate the necessary Docker and Helm chart assets for running the application.</span></span> <span data-ttu-id="d59c6-195">Затем выполняется код в AKS с помощью `azds up`.</span><span class="sxs-lookup"><span data-stu-id="d59c6-195">Then you run your code in AKS using `azds up`.</span></span> <span data-ttu-id="d59c6-196">При первом выполнении этой команды будет установлена диаграмма Helm.</span><span class="sxs-lookup"><span data-stu-id="d59c6-196">The first time you run this command, the Helm chart will be installed.</span></span> <span data-ttu-id="d59c6-197">Контейнеры будут созданы и развернуты в соответствии с вашими инструкциями.</span><span class="sxs-lookup"><span data-stu-id="d59c6-197">The containers will be built and deployed according to your instructions.</span></span> <span data-ttu-id="d59c6-198">Эта задача может занять несколько минут при первом запуске.</span><span class="sxs-lookup"><span data-stu-id="d59c6-198">This task may take a few minutes the first time it's run.</span></span> <span data-ttu-id="d59c6-199">Однако после внесения изменений можно подключиться к своему дочернему пространству разработки с помощью `azds space select` , а затем развернуть и отладить обновления в изолированном дочернем пространстве разработки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-199">However, after you make changes, you can connect to your own child dev space using `azds space select` and then deploy and debug your updates in your isolated child dev space.</span></span> <span data-ttu-id="d59c6-200">После создания и запуска пространства разработки можно отправить в него обновления, выполнив `azds up` команду или используя встроенные средства в Visual Studio или Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="d59c6-200">Once you have your dev space up and running, you can send updates to it by reissuing the `azds up` command or you can use built-in tooling in Visual Studio or Visual Studio Code.</span></span> <span data-ttu-id="d59c6-201">С помощью VS Code палитра команд используется для подключения к пространству разработки.</span><span class="sxs-lookup"><span data-stu-id="d59c6-201">With VS Code, you use the command palette to connect to your dev space.</span></span> <span data-ttu-id="d59c6-202">На рис. 3-12 показано, как запустить веб-приложение с помощью Azure Dev Spaces в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d59c6-202">Figure 3-12 shows how to launch your web application using Azure Dev Spaces in Visual Studio.</span></span>

<span data-ttu-id="d59c6-203">![Подключение к Azure dev Spaces в Visual Studio](./media/azure-dev-spaces-visual-studio-launchsettings.png)
**рис. 3-12**.</span><span class="sxs-lookup"><span data-stu-id="d59c6-203">![Connect to Azure Dev Spaces in Visual Studio](./media/azure-dev-spaces-visual-studio-launchsettings.png)
**Figure 3-12**.</span></span> <span data-ttu-id="d59c6-204">Подключение к Azure Dev Spaces в Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d59c6-204">Connect to Azure Dev Spaces in Visual Studio</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d59c6-205">[Назад](combine-containers-serverless-approaches.md)
>[Вперед](scale-containers-serverless.md)</span><span class="sxs-lookup"><span data-stu-id="d59c6-205">[Previous](combine-containers-serverless-approaches.md)
[Next](scale-containers-serverless.md)</span></span>
