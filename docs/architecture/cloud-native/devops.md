---
title: DevOps
description: Рекомендации по DevOps для облачных приложений
ms.date: 05/13/2020
ms.openlocfilehash: e6e093a1847d3aec37ac5d4ca56f64e0091a9b6b
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/24/2020
ms.locfileid: "91164003"
---
# <a name="devops"></a><span data-ttu-id="391d6-103">DevOps</span><span class="sxs-lookup"><span data-stu-id="391d6-103">DevOps</span></span>

<span data-ttu-id="391d6-104">Любимые мантру консультантов по программному обеспечению — это вопрос, что он зависит от любого вопроса.</span><span class="sxs-lookup"><span data-stu-id="391d6-104">The favorite mantra of software consultants is to answer "It depends" to any question posed.</span></span> <span data-ttu-id="391d6-105">Это не так, потому что консультанты по программному обеспечению не любят в должности.</span><span class="sxs-lookup"><span data-stu-id="391d6-105">It isn't because software consultants are fond of not taking a position.</span></span> <span data-ttu-id="391d6-106">Это обусловлено тем, что в программном обеспечении нет одного действительного ответа на любые вопросы.</span><span class="sxs-lookup"><span data-stu-id="391d6-106">It's because there's no one true answer to any questions in software.</span></span> <span data-ttu-id="391d6-107">Абсолютное право и неверно, а не баланс между противоположными.</span><span class="sxs-lookup"><span data-stu-id="391d6-107">There's no absolute right and wrong, but rather a balance between opposites.</span></span>

<span data-ttu-id="391d6-108">Возьмем, к примеру, два основных школы разработки веб-приложений: одностраничные приложения (одностраничные приложения) и приложения на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="391d6-108">Take, for instance, the two major schools of developing web applications: Single Page Applications (SPAs) versus server-side applications.</span></span> <span data-ttu-id="391d6-109">С одной стороны, взаимодействие с пользователем, как правило, лучше с одностраничные приложения, а объем трафика к веб-серверу может быть минимальным, что позволяет разместить их на самом простом как статическое размещение.</span><span class="sxs-lookup"><span data-stu-id="391d6-109">On the one hand, the user experience tends to be better with SPAs and the amount of traffic to the web server can be minimized making it possible to host them on something as simple as static hosting.</span></span> <span data-ttu-id="391d6-110">С другой стороны, одностраничные приложения, как правило, медленнее разрабатывается и усложняет тестирование.</span><span class="sxs-lookup"><span data-stu-id="391d6-110">On the other hand, SPAs tend to be slower to develop and more difficult to test.</span></span> <span data-ttu-id="391d6-111">Какой из вариантов правильный?</span><span class="sxs-lookup"><span data-stu-id="391d6-111">Which one is the right choice?</span></span> <span data-ttu-id="391d6-112">Ну, это зависит от конкретной ситуации.</span><span class="sxs-lookup"><span data-stu-id="391d6-112">Well, it depends on your situation.</span></span>

<span data-ttu-id="391d6-113">Облачные приложения не могут быть неустойчивыми к тому же дичотоми.</span><span class="sxs-lookup"><span data-stu-id="391d6-113">Cloud-native applications aren't immune to that same dichotomy.</span></span> <span data-ttu-id="391d6-114">Они имеют четкие преимущества с точки зрения скорости разработки, стабильности и масштабируемости, но управление ими может быть довольно сложнее.</span><span class="sxs-lookup"><span data-stu-id="391d6-114">They have clear advantages in terms of speed of development, stability, and scalability, but managing them can be quite a bit more difficult.</span></span>

<span data-ttu-id="391d6-115">Лет назад, процесс перемещения приложения из среды разработки в рабочую среду и даже больше не был распространен.</span><span class="sxs-lookup"><span data-stu-id="391d6-115">Years ago, it wasn't uncommon for the process of moving an application from development to production to take a month, or even more.</span></span> <span data-ttu-id="391d6-116">Компании выпустили программное обеспечение на 6-или даже каждый год.</span><span class="sxs-lookup"><span data-stu-id="391d6-116">Companies released software on a 6-month or even every year cadence.</span></span> <span data-ttu-id="391d6-117">Для того, чтобы получить представление о ритмичности выпусков, которые были приемлемы до зеленых дней в Windows 10, один из них должен не обращаться к Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="391d6-117">One needs to look no further than Microsoft Windows to get an idea for the cadence of releases that were acceptable before the ever-green days of Windows 10.</span></span> <span data-ttu-id="391d6-118">Пять лет передаются между Windows XP и Vista, более 3 между Vista и Windows 7.</span><span class="sxs-lookup"><span data-stu-id="391d6-118">Five years passed between Windows XP and Vista, a further 3 between Vista and Windows 7.</span></span>

<span data-ttu-id="391d6-119">Теперь довольно хорошо установлено, что возможность выпуска программного обеспечения быстро позволяет компаниям быстро перемещаться на огромном рынке по сравнению с более слос конкурентами.</span><span class="sxs-lookup"><span data-stu-id="391d6-119">It's now fairly well established that being able to release software rapidly gives fast-moving companies a huge market advantage over their more sloth-like competitors.</span></span> <span data-ttu-id="391d6-120">Это по той причине, что основные обновления Windows 10 теперь примерно каждые шесть месяцев.</span><span class="sxs-lookup"><span data-stu-id="391d6-120">It's for that reason that major updates to Windows 10 are now approximately every six months.</span></span>

<span data-ttu-id="391d6-121">Шаблоны и методики, которые позволяют быстрее, более надежными выпусками получать ценность для бизнеса, называются DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-121">The patterns and practices that enable faster, more reliable releases to deliver value to the business are collectively known as DevOps.</span></span> <span data-ttu-id="391d6-122">Они состоят из широкого спектра идей, охватывающих весь жизненный цикл разработки программного обеспечения, от указания приложения до предоставления и работы приложения.</span><span class="sxs-lookup"><span data-stu-id="391d6-122">They consist of a wide range of ideas spanning the entire software development life cycle from specifying an application all the way up to delivering and operating that application.</span></span>

<span data-ttu-id="391d6-123">DevOps появилось перед микрослужбами, и вполне вероятно, что перемещение в сторону меньшего размера, более подогнать под цели служб, было бы невозможно без DevOps, чтобы было проще выпускать и работать не только с одним, но и с большим количеством приложений в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="391d6-123">DevOps emerged before microservices and it's likely that the movement towards smaller, more fit to purpose services wouldn't have been possible without DevOps to make releasing and operating not just one but many applications in production easier.</span></span>

![Рис. 10-1. тенденции поиска показывают, что рост в микрослужбах не начинается, пока DevOps является довольно хорошо установленной идеей.](./media/microservices-vs-devops.png)

<span data-ttu-id="391d6-125">**Рис. 10-1** -DevOps и микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="391d6-125">**Figure 10-1** - DevOps and microservices.</span></span>

<span data-ttu-id="391d6-126">Используя хорошие DevOpsные методики, можно реализовать преимущества облачных приложений, не суффокатинг в течение горного объема работы, фактически работающих с приложениями.</span><span class="sxs-lookup"><span data-stu-id="391d6-126">Through good DevOps practices, it's possible to realize the advantages of cloud-native applications without suffocating under a mountain of work actually operating the applications.</span></span>

<span data-ttu-id="391d6-127">Нет золотого по, когда дело доходит до DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-127">There's no golden hammer when it comes to DevOps.</span></span> <span data-ttu-id="391d6-128">Никто не может продавать полностью и полностью охватываемое решение для выпуска и эксплуатации высококачественных приложений.</span><span class="sxs-lookup"><span data-stu-id="391d6-128">Nobody can sell a complete and all-encompassing solution for releasing and operating high-quality applications.</span></span> <span data-ttu-id="391d6-129">Это связано с тем, что каждое приложение имеет разные отличия от других.</span><span class="sxs-lookup"><span data-stu-id="391d6-129">This is because each application is wildly different from all others.</span></span> <span data-ttu-id="391d6-130">Однако существуют средства, которые могут сделать DevOps гораздо менее непростой задачей.</span><span class="sxs-lookup"><span data-stu-id="391d6-130">However, there are tools that can make DevOps a far less daunting proposition.</span></span> <span data-ttu-id="391d6-131">Один из этих средств называется Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-131">One of these tools is known as Azure DevOps.</span></span>

## <a name="azure-devops"></a><span data-ttu-id="391d6-132">Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="391d6-132">Azure DevOps</span></span>

<span data-ttu-id="391d6-133">Azure DevOps имеет долгий Педигри.</span><span class="sxs-lookup"><span data-stu-id="391d6-133">Azure DevOps has a long pedigree.</span></span> <span data-ttu-id="391d6-134">Он может возвращаться к корням, когда Team Foundation Server сначала перешли в режим «в сети» и с помощью различных изменений имени: Visual Studio Online и Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="391d6-134">It can trace its roots back to when Team Foundation Server first moved online and through the various name changes: Visual Studio Online and Visual Studio Team Services.</span></span> <span data-ttu-id="391d6-135">В течение многих лет он стал намного больше, чем его предшественники.</span><span class="sxs-lookup"><span data-stu-id="391d6-135">Through the years, however, it has become far more than its predecessors.</span></span>

<span data-ttu-id="391d6-136">DevOps Azure делится на пять основных компонентов:</span><span class="sxs-lookup"><span data-stu-id="391d6-136">Azure DevOps is divided into five major components:</span></span>

![Рис. 10-2. пять основных областей Azure DevOps](./media/devops-components.png)

<span data-ttu-id="391d6-138">**Рис. 10-2** . Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-138">**Figure 10-2** - Azure DevOps.</span></span>

<span data-ttu-id="391d6-139">**Azure Repos** — управление исходным кодом, которое поддерживает система управления версиями Team Foundation почтенный (TFVC) и любимый в отрасли [Git](https://en.wikipedia.org/wiki/Git).</span><span class="sxs-lookup"><span data-stu-id="391d6-139">**Azure Repos** - Source code management that supports the venerable Team Foundation Version Control (TFVC) and the industry favorite [Git](https://en.wikipedia.org/wiki/Git).</span></span> <span data-ttu-id="391d6-140">Запросы на вытягивание предоставляют способ включения кода для социальных сетей, позволяя обсуждать изменения по мере их внесения.</span><span class="sxs-lookup"><span data-stu-id="391d6-140">Pull requests provide a way to enable social coding by fostering discussion of changes as they're made.</span></span>

<span data-ttu-id="391d6-141">**Azure Boards** — предоставляет средство отслеживания проблем и рабочих элементов, которое позволяет пользователям выбирать наиболее подходящие для них рабочие процессы.</span><span class="sxs-lookup"><span data-stu-id="391d6-141">**Azure Boards** - Provides an issue and work item tracking tool that strives to allow users to pick the workflows that work best for them.</span></span> <span data-ttu-id="391d6-142">Он включает ряд предварительно настроенных шаблонов, включая те, которые поддерживают методологии SCRUM и канбана для разработки.</span><span class="sxs-lookup"><span data-stu-id="391d6-142">It comes with a number of pre-configured templates including ones to support SCRUM and Kanban styles of development.</span></span>

<span data-ttu-id="391d6-143">**Azure pipelines** — система управления сборками и выпусками, которая поддерживает тесную интеграцию с Azure.</span><span class="sxs-lookup"><span data-stu-id="391d6-143">**Azure Pipelines** - A build and release management system that supports tight integration with Azure.</span></span> <span data-ttu-id="391d6-144">Сборки можно запускать на различных платформах из Windows в Linux до MacOS.</span><span class="sxs-lookup"><span data-stu-id="391d6-144">Builds can be run on a variety of platforms from Windows to Linux to MacOS.</span></span> <span data-ttu-id="391d6-145">Агенты сборки могут быть подготовлены в облаке или в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="391d6-145">Build agents may be provisioned in the cloud or on-premises.</span></span>

<span data-ttu-id="391d6-146">**Azure Test Plans** — отсутствие контроля качества не будет продолжено с помощью функции управления тестированием и произвольного тестирования, предоставляемой компонентом Test plans.</span><span class="sxs-lookup"><span data-stu-id="391d6-146">**Azure Test Plans** - No QA person will be left behind with the test management and exploratory testing support offered by the Test Plans feature.</span></span>

<span data-ttu-id="391d6-147">**Azure Artifacts** — канал артефактов, позволяющий компаниям создавать собственные, внутренние версии NuGet, NPM и другие.</span><span class="sxs-lookup"><span data-stu-id="391d6-147">**Azure Artifacts** - An artifact feed that allows companies to create their own, internal, versions of NuGet, npm, and others.</span></span> <span data-ttu-id="391d6-148">В случае сбоя централизованного репозитория он выполняет роль кэша вышестоящего пакета.</span><span class="sxs-lookup"><span data-stu-id="391d6-148">It serves a double purpose of acting as a cache of upstream packages if there's a failure of a centralized repository.</span></span>

<span data-ttu-id="391d6-149">Подразделение верхнего уровня в Azure DevOps называется проектом.</span><span class="sxs-lookup"><span data-stu-id="391d6-149">The top-level organizational unit in Azure DevOps is known as a Project.</span></span> <span data-ttu-id="391d6-150">В каждом проекте различные компоненты, такие как Azure Artifacts, могут быть включены и отключены.</span><span class="sxs-lookup"><span data-stu-id="391d6-150">Within each project the various components, such as Azure Artifacts, can be turned on and off.</span></span> <span data-ttu-id="391d6-151">Каждый из этих компонентов предоставляет различные преимущества для собственных облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="391d6-151">Each of these components provides different advantages for cloud-native applications.</span></span> <span data-ttu-id="391d6-152">Наиболее полезными являются репозитории, доски и конвейеры.</span><span class="sxs-lookup"><span data-stu-id="391d6-152">The three most useful are repositories, boards, and pipelines.</span></span> <span data-ttu-id="391d6-153">Если пользователям требуется управлять исходным кодом в другом стеке репозитория, например GitHub, но по-прежнему использовать преимущества Azure Pipelines и других компонентов, это вполне возможно.</span><span class="sxs-lookup"><span data-stu-id="391d6-153">If users want to manage their source code in another repository stack, such as GitHub, but still take advantage of Azure Pipelines and other components, that's perfectly possible.</span></span>

<span data-ttu-id="391d6-154">К счастью, группа разработчиков имеет множество вариантов выбора репозитория.</span><span class="sxs-lookup"><span data-stu-id="391d6-154">Fortunately, development teams have many options when selecting a repository.</span></span> <span data-ttu-id="391d6-155">Один из них — GitHub.</span><span class="sxs-lookup"><span data-stu-id="391d6-155">One of them is GitHub.</span></span>

## <a name="github-actions"></a><span data-ttu-id="391d6-156">Действия GitHub</span><span class="sxs-lookup"><span data-stu-id="391d6-156">GitHub Actions</span></span>

<span data-ttu-id="391d6-157">В 2009 GitHub — это широко популярный веб-репозиторий для размещения проектов, документации и кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-157">Founded in 2009, GitHub is a widely popular web-based repository for hosting projects, documentation, and code.</span></span> <span data-ttu-id="391d6-158">Многие крупные технические компании, такие как Apple, Amazon, Google и основные организации, используют GitHub.</span><span class="sxs-lookup"><span data-stu-id="391d6-158">Many large tech companies, such as Apple, Amazon, Google, and mainstream corporations use GitHub.</span></span> <span data-ttu-id="391d6-159">В качестве основы в GitHub используется распределенная система управления версиями с открытым исходным кодом с именем git.</span><span class="sxs-lookup"><span data-stu-id="391d6-159">GitHub uses the open-source, distributed version control system named Git as its foundation.</span></span> <span data-ttu-id="391d6-160">Сначала он добавляет собственный набор функций, включая отслеживание дефектов, функции и запросы на включение внесенных изменений, Управление задачами и вики-страницы для каждой базы кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-160">On top, it then adds its own set of features, including defect tracking, feature and pull requests, tasks management, and wikis for each code base.</span></span>

<span data-ttu-id="391d6-161">По мере развития GitHub также добавляются DevOps функции.</span><span class="sxs-lookup"><span data-stu-id="391d6-161">As GitHub evolves, it too is adding DevOps features.</span></span> <span data-ttu-id="391d6-162">Например, GitHub имеет собственный конвейер непрерывной интеграции или непрерывной поставки (CI/CD) с именем `GitHub Actions` .</span><span class="sxs-lookup"><span data-stu-id="391d6-162">For example, GitHub has its own continuous integration/continuous delivery (CI/CD) pipeline, called `GitHub Actions`.</span></span> <span data-ttu-id="391d6-163">Действия GitHub — это средство автоматизации рабочих процессов на базе сообщества.</span><span class="sxs-lookup"><span data-stu-id="391d6-163">GitHub Actions is a community-powered workflow automation tool.</span></span> <span data-ttu-id="391d6-164">Она позволяет DevOps группам интегрироваться с существующими инструментами, сочетать и сопоставлять новые продукты, а также подключать их к жизненному циклу программного обеспечения, включая существующих партнеров CI/CD.</span><span class="sxs-lookup"><span data-stu-id="391d6-164">It lets DevOps teams integrate with their existing tooling, mix and match new products, and hook into their software lifecycle, including existing CI/CD partners."</span></span>

<span data-ttu-id="391d6-165">У GitHub более 40 000 000 пользователей, что делает его самым большим узлом исходного кода в мире.</span><span class="sxs-lookup"><span data-stu-id="391d6-165">GitHub has over 40 million users, making it the largest host of source code in the world.</span></span> <span data-ttu-id="391d6-166">В октябре 2018 Корпорация Майкрософт приобрела GitHub.</span><span class="sxs-lookup"><span data-stu-id="391d6-166">In October of 2018, Microsoft purchased GitHub.</span></span> <span data-ttu-id="391d6-167">Корпорация Майкрософт приработала, что GitHub останется [открытой платформой](https://techcrunch.com/2018/06/04/microsoft-promises-to-keep-github-independent-and-open/) , которую любой разработчик может подключать и расширять.</span><span class="sxs-lookup"><span data-stu-id="391d6-167">Microsoft has pledged that GitHub will remain an [open platform](https://techcrunch.com/2018/06/04/microsoft-promises-to-keep-github-independent-and-open/) that any developer can plug into and extend.</span></span> <span data-ttu-id="391d6-168">Она продолжит работать как независимая компания.</span><span class="sxs-lookup"><span data-stu-id="391d6-168">It continues to operate as an independent company.</span></span> <span data-ttu-id="391d6-169">GitHub предлагает планы для корпоративных, рабочих, профессиональных и бесплатных учетных записей.</span><span class="sxs-lookup"><span data-stu-id="391d6-169">GitHub offers plans for enterprise, team, professional, and free accounts.</span></span>

## <a name="source-control"></a><span data-ttu-id="391d6-170">Система управления версиями</span><span class="sxs-lookup"><span data-stu-id="391d6-170">Source control</span></span>

<span data-ttu-id="391d6-171">Организация кода для собственного облачного приложения может оказаться сложной задачей.</span><span class="sxs-lookup"><span data-stu-id="391d6-171">Organizing the code for a cloud-native application can be challenging.</span></span> <span data-ttu-id="391d6-172">Вместо одного огромного приложения облачные приложения, как правило, состоят из веб-приложений небольших приложений, взаимодействующих друг с другом.</span><span class="sxs-lookup"><span data-stu-id="391d6-172">Instead of a single giant application, the cloud-native applications tend to be made up of a web of smaller applications that talk with one another.</span></span> <span data-ttu-id="391d6-173">Как и в случае с любыми вычислениями, лучшее расположение кода остается открытым вопросом.</span><span class="sxs-lookup"><span data-stu-id="391d6-173">As with all things in computing, the best arrangement of code remains an open question.</span></span> <span data-ttu-id="391d6-174">Существуют примеры успешных приложений, использующих различные виды макетов, но у двух вариантов кажется наиболее популярность.</span><span class="sxs-lookup"><span data-stu-id="391d6-174">There are examples of successful applications using different kinds of layouts, but two variants seem to have the most popularity.</span></span>

<span data-ttu-id="391d6-175">Прежде чем приступить к фактическому управлению исходным кодом, возможно, стоит выбрать, сколько проектов подходит.</span><span class="sxs-lookup"><span data-stu-id="391d6-175">Before getting down into the actual source control itself, it's probably worth deciding on how many projects are appropriate.</span></span> <span data-ttu-id="391d6-176">В рамках одного проекта поддерживается несколько репозиториев и создаются конвейеры.</span><span class="sxs-lookup"><span data-stu-id="391d6-176">Within a single project, there's support for multiple repositories, and build pipelines.</span></span> <span data-ttu-id="391d6-177">Доски немного сложнее, но их также можно легко назначить нескольким командам в рамках одного проекта.</span><span class="sxs-lookup"><span data-stu-id="391d6-177">Boards are a little more complicated, but there too, the tasks can easily be assigned to multiple teams within a single project.</span></span> <span data-ttu-id="391d6-178">Можно поддерживать сотни, даже тысячи разработчиков, из одного проекта Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-178">It's possible to support hundreds, even thousands of developers, out of a single Azure DevOps project.</span></span> <span data-ttu-id="391d6-179">Это, скорее всего, лучший подход, так как он предоставляет единое место для работы всех разработчиков и снижает путаницу при поиске одного приложения, когда разработчики не уверены в том, в каком проекте он находится.</span><span class="sxs-lookup"><span data-stu-id="391d6-179">Doing so is likely the best approach as it provides a single place for all developer to work out of and reduces the confusion of finding that one application when developers are unsure in which project in which it resides.</span></span>

<span data-ttu-id="391d6-180">Разделение кода для микрослужб в проекте Azure DevOps может быть несколько более сложным.</span><span class="sxs-lookup"><span data-stu-id="391d6-180">Splitting up code for microservices within the Azure DevOps project can be slightly more challenging.</span></span>

![Рис. 10-3. Сравнение одного и нескольких репозиториев](./media/single-repository-vs-multiple.png)

<span data-ttu-id="391d6-182">**Рис. 10-3** . один или несколько репозиториев.</span><span class="sxs-lookup"><span data-stu-id="391d6-182">**Figure 10-3** - One vs. many repositories.</span></span>

### <a name="repository-per-microservice"></a><span data-ttu-id="391d6-183">Репозиторий для каждой микрослужбы</span><span class="sxs-lookup"><span data-stu-id="391d6-183">Repository per microservice</span></span>

<span data-ttu-id="391d6-184">На первый взгляд, это кажется самым логичным подходом к разделению исходного кода для микрослужб.</span><span class="sxs-lookup"><span data-stu-id="391d6-184">At first glance, this seems like the most logical approach to splitting up the source code for microservices.</span></span> <span data-ttu-id="391d6-185">Каждый репозиторий может содержать код, необходимый для создания одной микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="391d6-185">Each repository can contain the code needed to build the one microservice.</span></span> <span data-ttu-id="391d6-186">Преимущества этого подхода легко видны:</span><span class="sxs-lookup"><span data-stu-id="391d6-186">The advantages to this approach are readily visible:</span></span>

1. <span data-ttu-id="391d6-187">Инструкции по созданию и обслуживанию приложения можно добавить в файл сведений в корне каждого репозитория.</span><span class="sxs-lookup"><span data-stu-id="391d6-187">Instructions for building and maintaining the application can be added to a README file at the root of each repository.</span></span> <span data-ttu-id="391d6-188">При зеркальном отображении репозиториев можно легко найти эти инструкции, уменьшая время запуска для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="391d6-188">When flipping through the repositories, it's easy to find these instructions, reducing spin-up time for developers.</span></span>
2. <span data-ttu-id="391d6-189">Каждая служба размещается на логическом месте, что легко можно найти, зная имя службы.</span><span class="sxs-lookup"><span data-stu-id="391d6-189">Every service is located in a logical place, easily found by knowing the name of the service.</span></span>
3. <span data-ttu-id="391d6-190">Сборки можно легко настроить таким способом, что они активируются только при внесении изменений в репозиторий-владелец.</span><span class="sxs-lookup"><span data-stu-id="391d6-190">Builds can easily be set up such that they're only triggered when a change is made to the owning repository.</span></span>
4. <span data-ttu-id="391d6-191">Количество изменений, поступающих в репозиторий, ограничено небольшим количеством разработчиков, работающих над проектом.</span><span class="sxs-lookup"><span data-stu-id="391d6-191">The number of changes coming into a repository is limited to the small number of developers working on the project.</span></span>
5. <span data-ttu-id="391d6-192">Безопасность легко настроить путем ограниченного числа репозиториев, на которые разработчики имеют разрешения на чтение и запись.</span><span class="sxs-lookup"><span data-stu-id="391d6-192">Security is easy to set up by restricting the repositories to which developers have read and write permissions.</span></span>
6. <span data-ttu-id="391d6-193">Параметры уровня репозитория могут быть изменены группой-владельцем с минимальным обсуждением с другими пользователями.</span><span class="sxs-lookup"><span data-stu-id="391d6-193">Repository level settings can be changed by the owning team with a minimum of discussion with others.</span></span>

<span data-ttu-id="391d6-194">Одной из ключевых идей микрослужб является то, что службы должны быть отделены друг от друга.</span><span class="sxs-lookup"><span data-stu-id="391d6-194">One of the key ideas behind microservices is that services should be siloed and separated from each other.</span></span> <span data-ttu-id="391d6-195">При использовании проектирования на основе домена для определения границ служб, которые службы выполняют в качестве границ транзакций.</span><span class="sxs-lookup"><span data-stu-id="391d6-195">When using Domain Driven Design to decide on the boundaries for services the services act as transactional boundaries.</span></span> <span data-ttu-id="391d6-196">Обновления базы данных не должны охватывать несколько служб.</span><span class="sxs-lookup"><span data-stu-id="391d6-196">Database updates shouldn't span multiple services.</span></span> <span data-ttu-id="391d6-197">Эта коллекция связанных данных называется ограниченным контекстом.</span><span class="sxs-lookup"><span data-stu-id="391d6-197">This collection of related data is referred to as a bounded context.</span></span>  <span data-ttu-id="391d6-198">Эта идея отражается изоляцией данных микрослужбы в отдельную и автономную базу данных от остальных служб.</span><span class="sxs-lookup"><span data-stu-id="391d6-198">This idea is reflected by the isolation of microservice data to a database separate and autonomous from the rest of the services.</span></span> <span data-ttu-id="391d6-199">В этом случае очень важно обеспечить эту идею до исходного кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-199">It makes a great deal of sense to carry this idea all the way through to the source code.</span></span>

<span data-ttu-id="391d6-200">Однако этот подход не имеет проблем.</span><span class="sxs-lookup"><span data-stu-id="391d6-200">However, this approach isn't without its issues.</span></span> <span data-ttu-id="391d6-201">Одной из самых прохладное проблем разработки является управление зависимостями.</span><span class="sxs-lookup"><span data-stu-id="391d6-201">One of the more gnarly development problems of our time is managing dependencies.</span></span> <span data-ttu-id="391d6-202">Рассмотрим число файлов, составляющих средний `node_modules` каталог.</span><span class="sxs-lookup"><span data-stu-id="391d6-202">Consider the number of files that make up the average `node_modules` directory.</span></span> <span data-ttu-id="391d6-203">Новая установка подобия, как `create-react-app` правило, приносит тысячи пакетов.</span><span class="sxs-lookup"><span data-stu-id="391d6-203">A fresh install of something like `create-react-app` is likely to bring with it thousands of packages.</span></span> <span data-ttu-id="391d6-204">Вопрос об управлении этими зависимостями — сложная задача.</span><span class="sxs-lookup"><span data-stu-id="391d6-204">The question of how to manage these dependencies is a difficult one.</span></span>

<span data-ttu-id="391d6-205">Если зависимость обновляется, то нисходящие пакеты также должны обновлять эту зависимость.</span><span class="sxs-lookup"><span data-stu-id="391d6-205">If a dependency is updated, then downstream packages must also update this dependency.</span></span> <span data-ttu-id="391d6-206">К сожалению, это занимается разработкой, поэтому неизменно, что `node_modules` каталог имеет несколько версий одного пакета, каждый из которых является зависимостью какого-либо другого пакета, версия которого немного отличается.</span><span class="sxs-lookup"><span data-stu-id="391d6-206">Unfortunately, that takes development work so, invariably, the `node_modules` directory ends up with multiple versions of a single package, each one a dependency of some other package that is versioned at a slightly different cadence.</span></span> <span data-ttu-id="391d6-207">Какую версию зависимости следует использовать при развертывании приложения?</span><span class="sxs-lookup"><span data-stu-id="391d6-207">When deploying an application, which version of a dependency should be used?</span></span> <span data-ttu-id="391d6-208">Версия, которая в данный момент находится в рабочей среде?</span><span class="sxs-lookup"><span data-stu-id="391d6-208">The version that is currently in production?</span></span> <span data-ttu-id="391d6-209">Версия, которая сейчас находится в бета-версии, но, вероятно, находится в рабочей среде на момент, когда потребитель делает его рабочей средой?</span><span class="sxs-lookup"><span data-stu-id="391d6-209">The version that is currently in Beta but is likely to be in production by the time the consumer makes it to production?</span></span> <span data-ttu-id="391d6-210">Сложные проблемы, которые не устраняются просто с помощью микрослужб.</span><span class="sxs-lookup"><span data-stu-id="391d6-210">Difficult problems that aren't resolved by just using microservices.</span></span>

<span data-ttu-id="391d6-211">Существуют библиотеки, зависящие от широкого спектра проектов.</span><span class="sxs-lookup"><span data-stu-id="391d6-211">There are libraries that are depended upon by a wide variety of projects.</span></span> <span data-ttu-id="391d6-212">Разделив микрослужбы по одному в каждом репозитории, можно разрешить внутренние зависимости с помощью внутреннего репозитория, Azure Artifacts.</span><span class="sxs-lookup"><span data-stu-id="391d6-212">By dividing the microservices up with one in each repository the internal dependencies can best be resolved by using the internal repository, Azure Artifacts.</span></span> <span data-ttu-id="391d6-213">Сборки для библиотек будут отправлять свои последние версии в Azure Artifacts для внутреннего использования.</span><span class="sxs-lookup"><span data-stu-id="391d6-213">Builds for libraries will push their latest versions into Azure Artifacts for internal consumption.</span></span> <span data-ttu-id="391d6-214">Подчиненный проект по-прежнему должен быть обновлен вручную, чтобы получить зависимость от новых пакетов.</span><span class="sxs-lookup"><span data-stu-id="391d6-214">The downstream project must still be manually updated to take a dependency on the newly updated packages.</span></span>

<span data-ttu-id="391d6-215">Другой недостаток представляет себя при перемещении кода между службами.</span><span class="sxs-lookup"><span data-stu-id="391d6-215">Another disadvantage presents itself when moving code between services.</span></span> <span data-ttu-id="391d6-216">Хотя было бы неплохо предполагать, что первое разделение приложения на микрослужбы составляет 100% верно, реальность заключается в том, что пресЦиент не так часто, как не допустить ошибок в подразделении служб.</span><span class="sxs-lookup"><span data-stu-id="391d6-216">Although it would be nice to believe that the first division of an application into microservices is 100% correct, the reality is that rarely we're so prescient as to make no service division mistakes.</span></span> <span data-ttu-id="391d6-217">Таким образом, функциональность и код, которые он будет выполнять, потребуется перенести из службы в службу: репозиторий в репозиторий.</span><span class="sxs-lookup"><span data-stu-id="391d6-217">Thus, functionality and the code that drives it will need to move from service to service: repository to repository.</span></span> <span data-ttu-id="391d6-218">При переходе из одного репозитория в другой код теряет свой журнал.</span><span class="sxs-lookup"><span data-stu-id="391d6-218">When leaping from one repository to another, the code loses its history.</span></span> <span data-ttu-id="391d6-219">Существует множество случаев, особенно в случае аудита, когда полный журнал на фрагменте кода является ценным.</span><span class="sxs-lookup"><span data-stu-id="391d6-219">There are many cases, especially in the event of an audit, where having full history on a piece of code is invaluable.</span></span>

<span data-ttu-id="391d6-220">Окончательное и наиболее важное недостатком является координация изменений.</span><span class="sxs-lookup"><span data-stu-id="391d6-220">The final and most important disadvantage is coordinating changes.</span></span> <span data-ttu-id="391d6-221">В истинном приложении микрослужб между службами не должно быть зависимостей развертывания.</span><span class="sxs-lookup"><span data-stu-id="391d6-221">In a true microservices application, there should be no deployment dependencies between services.</span></span> <span data-ttu-id="391d6-222">Можно развернуть службы A, B и C в любом порядке, так как они имеют слабую связь.</span><span class="sxs-lookup"><span data-stu-id="391d6-222">It should be possible to deploy services A, B, and C in any order as they have loose coupling.</span></span> <span data-ttu-id="391d6-223">В реальности, однако, бывают случаи, когда желательно внести изменение, охватывающее несколько репозиториев в одно и то же время.</span><span class="sxs-lookup"><span data-stu-id="391d6-223">In reality, however, there are times when it's desirable to make a change that crosses multiple repositories at the same time.</span></span> <span data-ttu-id="391d6-224">Некоторые примеры включают обновление библиотеки для закрытия бреши в системе безопасности или изменение протокола связи, используемого всеми службами.</span><span class="sxs-lookup"><span data-stu-id="391d6-224">Some examples include updating a library to close a security hole or changing a communication protocol used by all services.</span></span>

<span data-ttu-id="391d6-225">Чтобы выполнить изменение между репозиториями, необходимо выполнить фиксацию в каждом репозитории в случае успеха.</span><span class="sxs-lookup"><span data-stu-id="391d6-225">To do a cross-repository change requires a commit to each repository be made in succession.</span></span> <span data-ttu-id="391d6-226">Каждое изменение в каждом репозитории необходимо запросить и просмотреть отдельно.</span><span class="sxs-lookup"><span data-stu-id="391d6-226">Each change in each repository will need to be pull-requested and reviewed separately.</span></span> <span data-ttu-id="391d6-227">Это может быть трудно координировать.</span><span class="sxs-lookup"><span data-stu-id="391d6-227">This can be difficult to coordinate.</span></span>

<span data-ttu-id="391d6-228">Альтернативой использованию многих репозиториев является размещение всего исходного кода в огромном, всем известном, отдельном репозитории.</span><span class="sxs-lookup"><span data-stu-id="391d6-228">An alternative to using many repositories is to put all the source code together in a giant, all knowing, single repository.</span></span>

### <a name="single-repository"></a><span data-ttu-id="391d6-229">Один репозиторий</span><span class="sxs-lookup"><span data-stu-id="391d6-229">Single repository</span></span>

<span data-ttu-id="391d6-230">При таком подходе, иногда называемом [пререпозиторием](https://danluu.com/monorepo/), весь исходный код для каждой службы помещается в один и тот же репозиторий.</span><span class="sxs-lookup"><span data-stu-id="391d6-230">In this approach, sometimes referred to as a [monorepository](https://danluu.com/monorepo/), all the source code for every service is put into the same repository.</span></span> <span data-ttu-id="391d6-231">Сначала это кажется плохойной идеей, которая, скорее всего, сделает работу с исходным кодом неудобной.</span><span class="sxs-lookup"><span data-stu-id="391d6-231">At first, this seems like a terrible idea likely to make dealing with source code unwieldy.</span></span> <span data-ttu-id="391d6-232">Однако для работы такого способа есть несколько отмеченных преимуществ.</span><span class="sxs-lookup"><span data-stu-id="391d6-232">There are, however, some marked advantages to working this way.</span></span>

<span data-ttu-id="391d6-233">Первое преимущество заключается в том, что проще управлять зависимостями между проектами.</span><span class="sxs-lookup"><span data-stu-id="391d6-233">The first advantage is that it's easier to manage dependencies between projects.</span></span> <span data-ttu-id="391d6-234">Вместо того чтобы полагаться на некоторый внешний веб-канал артефактов, проекты могут напрямую импортировать друг друга.</span><span class="sxs-lookup"><span data-stu-id="391d6-234">Instead of relying on some external artifact feed, projects can directly import one another.</span></span> <span data-ttu-id="391d6-235">Это означает, что обновления выполняются мгновенно, а конфликтующие версии, скорее всего, будут находиться во время компиляции на рабочей станции разработчика.</span><span class="sxs-lookup"><span data-stu-id="391d6-235">This means that updates are instant, and conflicting versions are likely to be found at compile time on the developer's workstation.</span></span> <span data-ttu-id="391d6-236">По сути, сдвигая часть тестирования интеграции влево.</span><span class="sxs-lookup"><span data-stu-id="391d6-236">In effect, shifting some of the integration testing left.</span></span>

<span data-ttu-id="391d6-237">При перемещении кода между проектами стало проще сохранить журнал, так как файлы будут обнаружены так, как если бы они были перемещены, а не перезаписаны.</span><span class="sxs-lookup"><span data-stu-id="391d6-237">When moving code between projects, it's now easier to preserve the history as the files will be detected as having been moved rather than being rewritten.</span></span>

<span data-ttu-id="391d6-238">Другое преимущество заключается в том, что в рамках одной фиксации могут быть сделаны различные изменения, которые пересекают границы служб.</span><span class="sxs-lookup"><span data-stu-id="391d6-238">Another advantage is that wide ranging changes that cross service boundaries can be made in a single commit.</span></span> <span data-ttu-id="391d6-239">Это снижает издержки, возникающие при наличии потенциально десятков изменений для индивидуальной проверки.</span><span class="sxs-lookup"><span data-stu-id="391d6-239">This reduces the overhead of having potentially dozens of changes to review individually.</span></span>

<span data-ttu-id="391d6-240">Существует множество средств, которые могут выполнять статический анализ кода для обнаружения небезопасных методик программирования или проблемного использования интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="391d6-240">There are many tools that can perform static analysis of code to detect insecure programming practices or problematic use of APIs.</span></span> <span data-ttu-id="391d6-241">В мире с несколькими репозиториями потребуется выполнить итерацию каждого репозитория, чтобы найти проблемы в них.</span><span class="sxs-lookup"><span data-stu-id="391d6-241">In a multi-repository world, each repository will need to be iterated over to find the problems in them.</span></span> <span data-ttu-id="391d6-242">Единый репозиторий позволяет выполнять анализ всего в одном месте.</span><span class="sxs-lookup"><span data-stu-id="391d6-242">The single repository allows running the analysis all in one place.</span></span>

<span data-ttu-id="391d6-243">Подход единого репозитория также имеет множество недостатков.</span><span class="sxs-lookup"><span data-stu-id="391d6-243">There are also many disadvantages to the single repository approach.</span></span> <span data-ttu-id="391d6-244">Одна из самых невероятных проблем заключается в том, что наличие единого репозитория вызывает проблемы безопасности.</span><span class="sxs-lookup"><span data-stu-id="391d6-244">One of the most worrying ones is that having a single repository raises security concerns.</span></span> <span data-ttu-id="391d6-245">Если содержимое репозитория теряется в репозитории для каждой модели службы, то объем потерянного кода будет минимальным.</span><span class="sxs-lookup"><span data-stu-id="391d6-245">If the contents of a repository are leaked in a repository per service model, the amount of code lost is minimal.</span></span> <span data-ttu-id="391d6-246">В одном репозитории все, что принадлежит компании, может быть потеряно.</span><span class="sxs-lookup"><span data-stu-id="391d6-246">With a single repository, everything the company owns could be lost.</span></span> <span data-ttu-id="391d6-247">В прошлом существовало много примеров, которые применяют все усилия по разработке игр.</span><span class="sxs-lookup"><span data-stu-id="391d6-247">There have been many examples in the past of this happening and derailing entire game development efforts.</span></span> <span data-ttu-id="391d6-248">Наличие нескольких репозиториев предоставляет меньше контактную зону, что является предпочтительным вариантом для большинства методов обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="391d6-248">Having multiple repositories exposes less surface area, which is a desirable trait in most security practices.</span></span>

<span data-ttu-id="391d6-249">Вероятно, размер одного репозитория быстро становится неуправляемым.</span><span class="sxs-lookup"><span data-stu-id="391d6-249">The size of the single repository is likely to become unmanageable rapidly.</span></span> <span data-ttu-id="391d6-250">Это представляет некоторые интересные последствия для производительности.</span><span class="sxs-lookup"><span data-stu-id="391d6-250">This presents some interesting performance implications.</span></span> <span data-ttu-id="391d6-251">Может оказаться необходимым использовать специализированные средства, такие как [Виртуальная файловая система для Git](https://vfsforgit.org/), которая изначально была разработана для улучшения работы разработчиков в группе Windows.</span><span class="sxs-lookup"><span data-stu-id="391d6-251">It may become necessary to use specialized tools such as [Virtual File System for Git](https://vfsforgit.org/), which was originally designed to improve the experience for developers on the Windows team.</span></span>

<span data-ttu-id="391d6-252">Часто аргумент для использования одного репозитория сводится к аргументу, который Facebook или Google используют этот метод для размещения исходного кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-252">Frequently the argument for using a single repository boils down to an argument that Facebook or Google use this method for source code arrangement.</span></span> <span data-ttu-id="391d6-253">Если подход достаточно хорош для этих компаний, то, конечно, это правильный подход для всех компаний.</span><span class="sxs-lookup"><span data-stu-id="391d6-253">If the approach is good enough for these companies, then, surely, it's the correct approach for all companies.</span></span> <span data-ttu-id="391d6-254">Правда, очень важно, что несколько компаний работают с любыми подобными масштабом Facebook или Google.</span><span class="sxs-lookup"><span data-stu-id="391d6-254">The truth of the matter is that few companies operate on anything like the scale of Facebook or Google.</span></span> <span data-ttu-id="391d6-255">Проблемы, возникающие на этих масштабах, отличаются от большинства разработчиков.</span><span class="sxs-lookup"><span data-stu-id="391d6-255">The problems that occur at those scales are different from those most developers will face.</span></span> <span data-ttu-id="391d6-256">То, что хорошо подходит для Goose, может быть неудачным для взгляните.</span><span class="sxs-lookup"><span data-stu-id="391d6-256">What is good for the goose may not be good for the gander.</span></span>

<span data-ttu-id="391d6-257">В итоге можно использовать любое решение для размещения исходного кода для микрослужб.</span><span class="sxs-lookup"><span data-stu-id="391d6-257">In the end, either solution can be used to host the source code for microservices.</span></span> <span data-ttu-id="391d6-258">Однако в большинстве случаев управление и инженерные издержки работы в одном репозитории не имеют меажер преимуществ.</span><span class="sxs-lookup"><span data-stu-id="391d6-258">However, in most cases, the management, and engineering overhead of operating in a single repository isn't worth the meager advantages.</span></span> <span data-ttu-id="391d6-259">Разделение кода на несколько репозиториев способствует более четкому разделению проблем и способствует автономной работе групп разработчиков.</span><span class="sxs-lookup"><span data-stu-id="391d6-259">Splitting code up over multiple repositories encourages better separation of concerns and encourages autonomy among development teams.</span></span>  

### <a name="standard-directory-structure"></a><span data-ttu-id="391d6-260">Стандартная структура каталогов</span><span class="sxs-lookup"><span data-stu-id="391d6-260">Standard directory structure</span></span>

<span data-ttu-id="391d6-261">Независимо от спорного обсуждения в одной и нескольких репозиториях каждая служба будет иметь свой собственный каталог.</span><span class="sxs-lookup"><span data-stu-id="391d6-261">Regardless of the single versus multiple repositories debate each service will have its own directory.</span></span> <span data-ttu-id="391d6-262">Одна из лучших оптимизаций, позволяющая разработчикам быстро пересекать проекты, — поддерживать стандартную структуру каталогов.</span><span class="sxs-lookup"><span data-stu-id="391d6-262">One of the best optimizations to allow developers to cross between projects quickly is to maintain a standard directory structure.</span></span>

![Рис. 10-4. Стандартная структура каталогов для служб электронной почты и входа в систему](./media/dir-struct.png)

<span data-ttu-id="391d6-264">**Рис. 10-4** . Стандартная структура каталогов.</span><span class="sxs-lookup"><span data-stu-id="391d6-264">**Figure 10-4** - Standard directory structure.</span></span>

<span data-ttu-id="391d6-265">При создании нового проекта следует использовать шаблон, который помещает на месте правильную структуру.</span><span class="sxs-lookup"><span data-stu-id="391d6-265">Whenever a new project is created, a template that puts in place the correct structure should be used.</span></span> <span data-ttu-id="391d6-266">Этот шаблон также может включать такие полезные элементы как скелет файла README и `azure-pipelines.yml` .</span><span class="sxs-lookup"><span data-stu-id="391d6-266">This template can also include such useful items as a skeleton README file and an `azure-pipelines.yml`.</span></span> <span data-ttu-id="391d6-267">В любой архитектуре микрослужб высокая степень вариативности между проектами усложняет работу с службами.</span><span class="sxs-lookup"><span data-stu-id="391d6-267">In any microservice architecture, a high degree of variance between projects makes bulk operations against the services more difficult.</span></span>

<span data-ttu-id="391d6-268">Существует множество средств, которые могут предоставить шаблоны для всего каталога, содержащего несколько каталогов исходного кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-268">There are many tools that can provide templating for an entire directory, containing several source code directories.</span></span> <span data-ttu-id="391d6-269">[Yeoman](https://yeoman.io/) является популярным в мире JavaScript, и GitHub недавно выпустила [шаблоны репозитория](https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/), которые обеспечивают многие функции.</span><span class="sxs-lookup"><span data-stu-id="391d6-269">[Yeoman](https://yeoman.io/) is popular in the JavaScript world and GitHub have recently released [Repository Templates](https://github.blog/2019-06-06-generate-new-repositories-with-repository-templates/), which provide much of the same functionality.</span></span>

## <a name="task-management"></a><span data-ttu-id="391d6-270">Управление задачами</span><span class="sxs-lookup"><span data-stu-id="391d6-270">Task management</span></span>

<span data-ttu-id="391d6-271">Управление задачами в любом проекте может быть затруднительным.</span><span class="sxs-lookup"><span data-stu-id="391d6-271">Managing tasks in any project can be difficult.</span></span> <span data-ttu-id="391d6-272">На самом себе есть бесчисленные вопросы о том, какие рабочие процессы необходимо настроить для обеспечения оптимальной производительности разработчиков.</span><span class="sxs-lookup"><span data-stu-id="391d6-272">Up front there are countless questions to be answered about the sort of workflows to set up to ensure optimal developer productivity.</span></span>

<span data-ttu-id="391d6-273">Облачные приложения, как правило, меньше традиционных программных продуктов, или по крайней мере они делятся на более мелкие службы.</span><span class="sxs-lookup"><span data-stu-id="391d6-273">Cloud-native applications tend to be smaller than traditional software products or at least they're divided into smaller services.</span></span> <span data-ttu-id="391d6-274">Отслеживание проблем или задач, связанных с этими службами, остается так же важным, как и для любого другого проекта программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="391d6-274">Tracking of issues or tasks related to these services remains as important as with any other software project.</span></span> <span data-ttu-id="391d6-275">Никто не хочет отказаться от какого-либо рабочего элемента или объяснить клиенту, что их проблемы не были зарегистрированы надлежащим образом.</span><span class="sxs-lookup"><span data-stu-id="391d6-275">Nobody wants to lose track of some work item or explain to a customer that their issue wasn't properly logged.</span></span> <span data-ttu-id="391d6-276">Платы настраиваются на уровне проекта, но в пределах каждого проекта области могут быть определены.</span><span class="sxs-lookup"><span data-stu-id="391d6-276">Boards are configured at the project level but within each project, areas can be defined.</span></span> <span data-ttu-id="391d6-277">Они позволяют разбить проблемы на несколько компонентов.</span><span class="sxs-lookup"><span data-stu-id="391d6-277">These allow breaking down issues across several components.</span></span> <span data-ttu-id="391d6-278">Преимущество сохранения всей работы для всего приложения в одном месте заключается в том, что можно легко переместить рабочие элементы из одной команды в другую, так как они понятнее.</span><span class="sxs-lookup"><span data-stu-id="391d6-278">The advantage to keeping all the work for the entire application in one place is that it's easy to move work items from one team to another as they're understood better.</span></span>

<span data-ttu-id="391d6-279">Azure DevOps поставляется с набором популярных шаблонов, которые предварительно настроены.</span><span class="sxs-lookup"><span data-stu-id="391d6-279">Azure DevOps comes with a number of popular templates pre-configured.</span></span> <span data-ttu-id="391d6-280">В самой базовой конфигурации все, что необходимо для того, чтобы узнать, что такое невыполненная работа, какие пользователи работают и что делать.</span><span class="sxs-lookup"><span data-stu-id="391d6-280">In the most basic configuration, all that is needed to know is what's in the backlog, what people are working on, and what's done.</span></span> <span data-ttu-id="391d6-281">Важно обеспечить эту видимость процесса создания программного обеспечения, чтобы можно было назначать приоритеты и завершать задачи, сообщаемые клиенту.</span><span class="sxs-lookup"><span data-stu-id="391d6-281">It's important to have this visibility into the process of building software, so that work can be prioritized and completed tasks reported to the customer.</span></span> <span data-ttu-id="391d6-282">Разумеется, несколько программных проектов применяют процесс как `to do` , `doing` и `done` .</span><span class="sxs-lookup"><span data-stu-id="391d6-282">Of course, few software projects stick to a process as simple as `to do`, `doing`, and `done`.</span></span> <span data-ttu-id="391d6-283">Добавление в процесс действий, таких как или, не занимает много времени `QA` `Detailed Specification` .</span><span class="sxs-lookup"><span data-stu-id="391d6-283">It doesn't take long for people to start adding steps like `QA` or `Detailed Specification` to the process.</span></span>

<span data-ttu-id="391d6-284">Одной из наиболее важных частей гибких методологий является самоанализ через регулярные интервалы.</span><span class="sxs-lookup"><span data-stu-id="391d6-284">One of the more important parts of Agile methodologies is self-introspection at regular intervals.</span></span> <span data-ttu-id="391d6-285">Эти проверки предназначены для получения сведений о проблемах, с которыми сталкиваются команды, и о том, как их можно улучшить.</span><span class="sxs-lookup"><span data-stu-id="391d6-285">These reviews are meant to provide insight into what problems the team is facing and how they can be improved.</span></span> <span data-ttu-id="391d6-286">Часто это означает изменение потока проблем и функций с помощью процесса разработки.</span><span class="sxs-lookup"><span data-stu-id="391d6-286">Frequently, this means changing the flow of issues and features through the development process.</span></span> <span data-ttu-id="391d6-287">Это вполне работоспособно, чтобы расширить макеты плат с дополнительными этапами.</span><span class="sxs-lookup"><span data-stu-id="391d6-287">So, it's perfectly healthy to expand the layouts of the boards with additional stages.</span></span>

<span data-ttu-id="391d6-288">Этапы на досках не являются единственным средством организации.</span><span class="sxs-lookup"><span data-stu-id="391d6-288">The stages in the boards aren't the only organizational tool.</span></span> <span data-ttu-id="391d6-289">В зависимости от конфигурации доски есть иерархия рабочих элементов.</span><span class="sxs-lookup"><span data-stu-id="391d6-289">Depending on the configuration of the board, there's a hierarchy of work items.</span></span> <span data-ttu-id="391d6-290">Наиболее детализированный элемент, который может отображаться на доске, — это задача.</span><span class="sxs-lookup"><span data-stu-id="391d6-290">The most granular item that can appear on a board is a task.</span></span> <span data-ttu-id="391d6-291">В этом случае задача содержит поля для заголовка, описания, приоритета, оценки объема оставшейся работы и возможность связывания с другими рабочими элементами или элементами разработки (ветви, фиксации, запросы на включение внесенных изменений, сборки и т. д.).</span><span class="sxs-lookup"><span data-stu-id="391d6-291">Out of the box a task contains fields for a title, description, a priority, an estimate of the amount of work remaining and the ability to link to other work items or development items (branches, commits, pull requests, builds, and so forth).</span></span> <span data-ttu-id="391d6-292">Рабочие элементы можно классифицировать в разные области приложения и разные итерации (спринты), чтобы упростить их поиск.</span><span class="sxs-lookup"><span data-stu-id="391d6-292">Work items can be classified into different areas of the application and different iterations (sprints) to make finding them easier.</span></span>

![Рис. 10-5. пример задачи в Azure DevOps](./media/task-details.png)

<span data-ttu-id="391d6-294">**Рис. 10-5** . задача в Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-294">**Figure 10-5** - Task in Azure DevOps.</span></span>

<span data-ttu-id="391d6-295">Поле Description (описание) поддерживает обычные стили (полужирный, курсив, подчеркивание и зачеркивание) и возможность вставки изображений.</span><span class="sxs-lookup"><span data-stu-id="391d6-295">The description field supports the normal styles you'd expect (bold, italic underscore and strike through) and the ability to insert images.</span></span> <span data-ttu-id="391d6-296">Это дает мощный инструмент для использования при указании рабочих или ошибок.</span><span class="sxs-lookup"><span data-stu-id="391d6-296">This makes it a powerful tool for use when specifying work or bugs.</span></span>

<span data-ttu-id="391d6-297">Задачи можно свести к функциям, которые определяют большую единицу работы.</span><span class="sxs-lookup"><span data-stu-id="391d6-297">Tasks can be rolled up into features, which define a larger unit of work.</span></span> <span data-ttu-id="391d6-298">Функции, в свою очередь, могут быть [сведены в ситуаций](/azure/devops/boards/backlogs/define-features-epics?view=azure-devops).</span><span class="sxs-lookup"><span data-stu-id="391d6-298">Features, in turn, can be [rolled up into epics](/azure/devops/boards/backlogs/define-features-epics?view=azure-devops).</span></span> <span data-ttu-id="391d6-299">Классификация задач в этой иерархии значительно упрощает понимание того, как можно развернуть большую функцию.</span><span class="sxs-lookup"><span data-stu-id="391d6-299">Classifying tasks in this hierarchy makes it much easier to understand how close a large feature is to rolling out.</span></span>

![Рис. 10-6. типы рабочих элементов, настроенные по умолчанию в базовом шаблоне процесса](./media/board-issue-types.png)

<span data-ttu-id="391d6-301">**Рис. 10-6** . Рабочий элемент в Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-301">**Figure 10-6** - Work item in Azure DevOps.</span></span>

<span data-ttu-id="391d6-302">Существуют различные виды представлений проблем в Azure Boards.</span><span class="sxs-lookup"><span data-stu-id="391d6-302">There are different kinds of views into the issues in Azure Boards.</span></span> <span data-ttu-id="391d6-303">Элементы, которые еще не запланированы, отображаются в невыполненной работе.</span><span class="sxs-lookup"><span data-stu-id="391d6-303">Items that aren't yet scheduled appear in the backlog.</span></span> <span data-ttu-id="391d6-304">Отсюда их можно назначить спринту.</span><span class="sxs-lookup"><span data-stu-id="391d6-304">From there, they can be assigned to a sprint.</span></span> <span data-ttu-id="391d6-305">Спринт — это поле времени, в течение которого должно выполняться определенное количество работы.</span><span class="sxs-lookup"><span data-stu-id="391d6-305">A sprint is a time box during which it's expected some quantity of work will be completed.</span></span> <span data-ttu-id="391d6-306">Эта работа может включать задачи, а также разрешения билетов.</span><span class="sxs-lookup"><span data-stu-id="391d6-306">This work can include tasks but also the resolution of tickets.</span></span> <span data-ttu-id="391d6-307">После этого можно управлять целым спринтом из раздела доски спринта.</span><span class="sxs-lookup"><span data-stu-id="391d6-307">Once there, the entire sprint can be managed from the Sprint board section.</span></span> <span data-ttu-id="391d6-308">В этом представлении показано, как работает ход выполнения, а также показана диаграмма с заработкой, которая позволяет получить постоянно обновляемое значение, если спринт будет успешным.</span><span class="sxs-lookup"><span data-stu-id="391d6-308">This view shows how work is progressing and includes a burn down chart to give an ever-updating estimate of if the sprint will be successful.</span></span>

![Рис. 10-7. доска с определенным спринтом](./media/sprint-board.png)

<span data-ttu-id="391d6-310">**Рис. 10-7** . доска DevOps в Azure.</span><span class="sxs-lookup"><span data-stu-id="391d6-310">**Figure 10-7** - Board in Azure DevOps.</span></span>

<span data-ttu-id="391d6-311">К этому моменту вы должны быть очевидны, что в Azure DevOps есть большой опыт работы с досками.</span><span class="sxs-lookup"><span data-stu-id="391d6-311">By now, it should be apparent that there's a great deal of power in the Boards in Azure DevOps.</span></span> <span data-ttu-id="391d6-312">Разработчикам доступны простые представления о том, над чем работает.</span><span class="sxs-lookup"><span data-stu-id="391d6-312">For developers, there are easy views of what is being worked on.</span></span> <span data-ttu-id="391d6-313">Руководители проектов просматривает предстоящие работы, а также общие сведения о существующей работе.</span><span class="sxs-lookup"><span data-stu-id="391d6-313">For project managers views into upcoming work as well as an overview of existing work.</span></span> <span data-ttu-id="391d6-314">Для руководителей существует множество отчетов об использовании источников и емкости.</span><span class="sxs-lookup"><span data-stu-id="391d6-314">For managers, there are plenty of reports about resourcing and capacity.</span></span> <span data-ttu-id="391d6-315">К сожалению, нет ничего Magical о собственных приложениях в облаке, которые устраняют необходимость в отслеживании работы.</span><span class="sxs-lookup"><span data-stu-id="391d6-315">Unfortunately, there's nothing magical about cloud-native applications that eliminate the need to track work.</span></span> <span data-ttu-id="391d6-316">Но если необходимо отвестись от работы, существует несколько мест, в которых качество работы выше, чем в Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="391d6-316">But if you must track work, there are a few places where the experience is better than in Azure DevOps.</span></span>

## <a name="cicd-pipelines"></a><span data-ttu-id="391d6-317">Конвейеры CI/CD</span><span class="sxs-lookup"><span data-stu-id="391d6-317">CI/CD pipelines</span></span>

<span data-ttu-id="391d6-318">Практически без изменений в жизненном цикле разработки программного обеспечения было настолько революционным, как и появление непрерывной интеграции (CI) и непрерывной поставки (CD).</span><span class="sxs-lookup"><span data-stu-id="391d6-318">Almost no change in the software development life cycle has been so revolutionary as the advent of continuous integration (CI) and continuous delivery (CD).</span></span> <span data-ttu-id="391d6-319">Создание и выполнение автоматических тестов для исходного кода проекта, как только после возврата изменений происходит перехват ошибок, на ранних этапах.</span><span class="sxs-lookup"><span data-stu-id="391d6-319">Building and running automated tests against the source code of a project as soon as a change is checked in catches mistakes early.</span></span> <span data-ttu-id="391d6-320">До появления сборки непрерывной интеграции не пришлось бы часто извлекать код из репозитория и обнаруживать, что он не прошел тесты или даже не может быть построен.</span><span class="sxs-lookup"><span data-stu-id="391d6-320">Prior to the advent of continuous integration builds, it wouldn't be uncommon to pull code from the repository and find that it didn't pass tests or couldn't even be built.</span></span> <span data-ttu-id="391d6-321">Это привело к отслеживанию источника невозможности.</span><span class="sxs-lookup"><span data-stu-id="391d6-321">This resulted in tracking down the source of the breakage.</span></span>

<span data-ttu-id="391d6-322">Традиционное поставку программного обеспечения в рабочую среду требовало обширной документации и списка шагов.</span><span class="sxs-lookup"><span data-stu-id="391d6-322">Traditionally shipping software to the production environment required extensive documentation and a list of steps.</span></span> <span data-ttu-id="391d6-323">Каждое из этих действий необходимо выполнить вручную в процессе, подверженном ошибкам.</span><span class="sxs-lookup"><span data-stu-id="391d6-323">Each one of these steps needed to be manually completed in a very error prone process.</span></span>

![Рис. 10-8. Контрольный список](./media/checklist.png)

<span data-ttu-id="391d6-325">**Рис. 10-8** . Контрольный список.</span><span class="sxs-lookup"><span data-stu-id="391d6-325">**Figure 10-8** - Checklist.</span></span>

<span data-ttu-id="391d6-326">Связанное непрерывной интеграции — непрерывная доставка, в которой собранные пакеты развертываются в среде.</span><span class="sxs-lookup"><span data-stu-id="391d6-326">The sister of continuous integration is continuous delivery in which the freshly built packages are deployed to an environment.</span></span> <span data-ttu-id="391d6-327">Ручной процесс не может масштабироваться в соответствии со скоростью разработки, поэтому Автоматизация станет более важной.</span><span class="sxs-lookup"><span data-stu-id="391d6-327">The manual process can't scale to match the speed of development so automation becomes more important.</span></span> <span data-ttu-id="391d6-328">Контрольные списки заменяются сценариями, которые могут выполнять одни и те же задачи быстрее и точнее, чем любой человек.</span><span class="sxs-lookup"><span data-stu-id="391d6-328">Checklists are replaced by scripts that can execute the same tasks faster and more accurately than any human.</span></span>

<span data-ttu-id="391d6-329">Среда, к которой доставляется непрерывная поставка, может быть тестовой средой или, как и во многих основных компаниях, она может быть рабочей средой.</span><span class="sxs-lookup"><span data-stu-id="391d6-329">The environment to which continuous delivery delivers might be a test environment or, as is being done by many major technology companies, it could be the production environment.</span></span> <span data-ttu-id="391d6-330">Последний требует инвестиций в высококачественные тесты, которые могут дать уверенность в том, что изменение не будет приводить к нарушению рабочей среды для пользователей.</span><span class="sxs-lookup"><span data-stu-id="391d6-330">The latter requires an investment in high-quality tests that can give confidence that a change isn't going to break production for users.</span></span> <span data-ttu-id="391d6-331">Точно так же, как проблемы с непрерывной интеграцией в коде, в начале непрерывной доставки обнаруживаются проблемы в процессе развертывания.</span><span class="sxs-lookup"><span data-stu-id="391d6-331">In the same way that continuous integration caught issues in the code early continuous delivery catches issues in the deployment process early.</span></span>

<span data-ttu-id="391d6-332">Важность автоматизации процесса сборки и доставки противотроена облачным приложениям.</span><span class="sxs-lookup"><span data-stu-id="391d6-332">The importance of automating the build and delivery process is accentuated by cloud-native applications.</span></span> <span data-ttu-id="391d6-333">Развертывания происходят чаще и в других средах, что позволяет вручную развертывать границы на невозможности.</span><span class="sxs-lookup"><span data-stu-id="391d6-333">Deployments happen more frequently and to more environments so manually deploying borders on impossible.</span></span>

### <a name="azure-builds"></a><span data-ttu-id="391d6-334">Сборки Azure</span><span class="sxs-lookup"><span data-stu-id="391d6-334">Azure Builds</span></span>

<span data-ttu-id="391d6-335">Azure DevOps предоставляет набор средств для упрощения непрерывной интеграции и развертывания, чем когда-либо.</span><span class="sxs-lookup"><span data-stu-id="391d6-335">Azure DevOps provides a set of tools to make continuous integration and deployment easier than ever.</span></span> <span data-ttu-id="391d6-336">Эти средства находятся в разделе Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="391d6-336">These tools are located under Azure Pipelines.</span></span> <span data-ttu-id="391d6-337">Первый из них — это сборка Azure, представляющая собой средство для запуска определений сборки на основе YAML в масштабе.</span><span class="sxs-lookup"><span data-stu-id="391d6-337">The first of them is Azure Builds, which is a tool for running YAML-based build definitions at scale.</span></span> <span data-ttu-id="391d6-338">Пользователи могут использовать собственные компьютеры сборки (отлично, если для сборки требуется тщательная настройка среды) или компьютер из постоянно обновляемого пула виртуальных машин, размещенных в Azure.</span><span class="sxs-lookup"><span data-stu-id="391d6-338">Users can either bring their own build machines (great for if the build requires a meticulously set up environment) or use a machine from a constantly refreshed pool of Azure hosted virtual machines.</span></span> <span data-ttu-id="391d6-339">Эти размещенные агенты сборки предварительно устанавливаются с широким спектром средств разработки для разработки не только для .NET, но и для всех приложений из Java в Python и iPhone.</span><span class="sxs-lookup"><span data-stu-id="391d6-339">These hosted build agents come pre-installed with a wide range of development tools for not just .NET development but for everything from Java to Python to iPhone development.</span></span>

<span data-ttu-id="391d6-340">DevOps включает широкий спектр стандартных определений сборки, которые можно настроить для любой сборки.</span><span class="sxs-lookup"><span data-stu-id="391d6-340">DevOps includes a wide range of out of the box build definitions that can be customized for any build.</span></span> <span data-ttu-id="391d6-341">Определения сборки определяются в файле с именем `azure-pipelines.yml` и возвращаются в репозиторий, чтобы их можно было использовать для управления версиями вместе с исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="391d6-341">The build definitions are defined in a file called `azure-pipelines.yml` and checked into the repository so they can be versioned along with the source code.</span></span> <span data-ttu-id="391d6-342">Это значительно упрощает внесение изменений в конвейер сборки в ветви, так как изменения могут быть возвращены только в эту ветвь.</span><span class="sxs-lookup"><span data-stu-id="391d6-342">This makes it much easier to make changes to the build pipeline in a branch as the changes can be checked into just that branch.</span></span> <span data-ttu-id="391d6-343">Пример `azure-pipelines.yml` создания веб-приложения ASP.NET на полной платформе показан на рис. 10-9.</span><span class="sxs-lookup"><span data-stu-id="391d6-343">An example `azure-pipelines.yml` for building an ASP.NET web application on full framework is show in Figure 10-9.</span></span>

```yml
name: $(rev:r)

variables:
  version: 9.2.0.$(Build.BuildNumber)
  solution: Portals.sln
  artifactName: drop
  buildPlatform: any cpu
  buildConfiguration: release
  
pool:
  name: Hosted VS2017
  demands:
  - msbuild
  - visualstudio
  - vstest

steps:
- task: NuGetToolInstaller@0
  displayName: 'Use NuGet 4.4.1'
  inputs:
    versionSpec: 4.4.1

- task: NuGetCommand@2
  displayName: 'NuGet restore'
  inputs:
    restoreSolution: '$(solution)'

- task: VSBuild@1
  displayName: 'Build solution'
  inputs:
    solution: '$(solution)'
    msbuildArgs: '-p:DeployOnBuild=true -p:WebPublishMethod=Package -p:PackageAsSingleFile=true -p:SkipInvalidConfigurations=true -p:PackageLocation="$(build.artifactstagingdirectory)\\"'
    platform: '$(buildPlatform)'
    configuration: '$(buildConfiguration)'

- task: VSTest@2
  displayName: 'Test Assemblies'
  inputs:
    testAssemblyVer2: |
     **\$(buildConfiguration)\**\*test*.dll
     !**\obj\**
     !**\*testadapter.dll
    platform: '$(buildPlatform)'
    configuration: '$(buildConfiguration)'

- task: CopyFiles@2
  displayName: 'Copy UI Test Files to: $(build.artifactstagingdirectory)'
  inputs:
    SourceFolder: UITests
    TargetFolder: '$(build.artifactstagingdirectory)/uitests'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact'
  inputs:
    PathtoPublish: '$(build.artifactstagingdirectory)'
    ArtifactName: '$(artifactName)'
  condition: succeededOrFailed()
```

<span data-ttu-id="391d6-344">**Рис. 10-9** . пример Азуре-пипелинес. yml</span><span class="sxs-lookup"><span data-stu-id="391d6-344">**Figure 10-9** - A sample azure-pipelines.yml</span></span>

<span data-ttu-id="391d6-345">В этом определении сборки используется ряд встроенных задач, которые делают создание сборок простым, как создание общенаборного набора (проще, чем гигантская Falcon).</span><span class="sxs-lookup"><span data-stu-id="391d6-345">This build definition uses a number of built-in tasks that make creating builds as simple as building a Lego set (simpler than the giant Millennium Falcon).</span></span> <span data-ttu-id="391d6-346">Например, задача NuGet восстанавливает пакеты NuGet, а задача Всбуилд вызывает средства сборки Visual Studio для выполнения фактической компиляции.</span><span class="sxs-lookup"><span data-stu-id="391d6-346">For instance, the NuGet task restores NuGet packages, while the VSBuild task calls the Visual Studio build tools to perform the actual compilation.</span></span> <span data-ttu-id="391d6-347">В Azure DevOps доступны сотни различных задач с тысячами, которые поддерживаются сообществом.</span><span class="sxs-lookup"><span data-stu-id="391d6-347">There are hundreds of different tasks available in Azure DevOps, with thousands more that are maintained by the community.</span></span> <span data-ttu-id="391d6-348">Вполне вероятно, что вне зависимости от того, какие задачи сборки вы хотите запустить, кто уже создал ее.</span><span class="sxs-lookup"><span data-stu-id="391d6-348">It's likely that no matter what build tasks you're looking to run, somebody has built one already.</span></span>

<span data-ttu-id="391d6-349">Сборки могут запускаться вручную, по расписанию или после завершения другой сборки.</span><span class="sxs-lookup"><span data-stu-id="391d6-349">Builds can be triggered manually, by a check-in, on a schedule, or by the completion of another build.</span></span> <span data-ttu-id="391d6-350">В большинстве случаев рекомендуется создавать при каждом возврате.</span><span class="sxs-lookup"><span data-stu-id="391d6-350">In most cases, building on every check-in is desirable.</span></span> <span data-ttu-id="391d6-351">Сборки можно фильтровать, чтобы разные сборки выполнялись в разных частях репозитория или в разных ветвях.</span><span class="sxs-lookup"><span data-stu-id="391d6-351">Builds can be filtered so that different builds run against different parts of the repository or against different branches.</span></span> <span data-ttu-id="391d6-352">Это позволяет выполнять такие сценарии, как выполнение быстрых сборок с меньшим тестированием запросов на вытягивание и выполнение полноценного набора регрессий на основе магистрали на ночь.</span><span class="sxs-lookup"><span data-stu-id="391d6-352">This allows for scenarios like running fast builds with reduced testing on pull requests and running a full regression suite against the trunk on a nightly basis.</span></span>

<span data-ttu-id="391d6-353">Конечным результатом сборки является коллекция файлов, называемых артефактами сборки.</span><span class="sxs-lookup"><span data-stu-id="391d6-353">The end result of a build is a collection of files known as build artifacts.</span></span> <span data-ttu-id="391d6-354">Эти артефакты можно передать на следующий шаг в процессе сборки или добавить в веб-канал артефактов Azure, чтобы они могли использоваться другими сборками.</span><span class="sxs-lookup"><span data-stu-id="391d6-354">These artifacts can be passed along to the next step in the build process or added to an Azure Artifact feed, so they can be consumed by other builds.</span></span>

### <a name="azure-devops-releases"></a><span data-ttu-id="391d6-355">Выпуски Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="391d6-355">Azure DevOps releases</span></span>

<span data-ttu-id="391d6-356">Сборки позаботится о компиляции программного обеспечения в распространяемый пакет, однако артефакты по-прежнему нужно относить в тестовую среду для выполнения непрерывной поставки.</span><span class="sxs-lookup"><span data-stu-id="391d6-356">Builds take care of compiling the software into a shippable package, but the artifacts still need to be pushed out to a testing environment to complete continuous delivery.</span></span> <span data-ttu-id="391d6-357">Для этого Azure DevOps использует отдельное средство, именуемое выпусками.</span><span class="sxs-lookup"><span data-stu-id="391d6-357">For this, Azure DevOps uses a separate tool called Releases.</span></span> <span data-ttu-id="391d6-358">Средство выпусков использует ту же библиотеку задач, которая была доступна для сборки, но представит понятие «этапы».</span><span class="sxs-lookup"><span data-stu-id="391d6-358">The Releases tool makes use of the same tasks' library that were available to the Build but introduce a concept of "stages".</span></span> <span data-ttu-id="391d6-359">Этап — это изолированная среда, в которой установлен пакет.</span><span class="sxs-lookup"><span data-stu-id="391d6-359">A stage is an isolated environment into which the package is installed.</span></span> <span data-ttu-id="391d6-360">Например, продукт может использовать разработку, контроль качества и рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="391d6-360">For instance, a product might make use of a development, a QA, and a production environment.</span></span> <span data-ttu-id="391d6-361">Код постоянно доставляется в среду разработки, где можно выполнять автоматические тесты.</span><span class="sxs-lookup"><span data-stu-id="391d6-361">Code is continuously delivered into the development environment where automated tests can be run against it.</span></span> <span data-ttu-id="391d6-362">После того, как эти тесты прошли проверку, переходят в среду контроля качества для ручного тестирования.</span><span class="sxs-lookup"><span data-stu-id="391d6-362">Once those tests pass the release moves onto the QA environment for manual testing.</span></span> <span data-ttu-id="391d6-363">Наконец, код помещается в рабочую среду, где он виден всем.</span><span class="sxs-lookup"><span data-stu-id="391d6-363">Finally, the code is pushed to production where it's visible to everybody.</span></span>

![Рис. 10-10. пример конвейера выпуска с этапами разработки, контроля качества и производства](./media/release-pipeline.png)

<span data-ttu-id="391d6-365">**Рис. 10-10** . конвейер выпуска</span><span class="sxs-lookup"><span data-stu-id="391d6-365">**Figure 10-10** - Release pipeline</span></span>

<span data-ttu-id="391d6-366">Каждый этап сборки может автоматически активироваться завершением предыдущего этапа.</span><span class="sxs-lookup"><span data-stu-id="391d6-366">Each stage in the build can be automatically triggered by the completion of the previous phase.</span></span> <span data-ttu-id="391d6-367">Однако во многих случаях это нежелательно.</span><span class="sxs-lookup"><span data-stu-id="391d6-367">In many cases, however, this isn't desirable.</span></span> <span data-ttu-id="391d6-368">Перемещение кода в рабочую среду может потребовать утверждения от кого бы то ни было.</span><span class="sxs-lookup"><span data-stu-id="391d6-368">Moving code into production might require approval from somebody.</span></span> <span data-ttu-id="391d6-369">Средство выпусков поддерживает это, разрешая утверждающие на каждом шаге конвейера выпуска.</span><span class="sxs-lookup"><span data-stu-id="391d6-369">The Releases tool supports this by allowing approvers at each step of the release pipeline.</span></span> <span data-ttu-id="391d6-370">Правила можно настроить таким образом, чтобы конкретный пользователь или группа людей должны выйти из выпуска, прежде чем они будут внесены в рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="391d6-370">Rules can be set up such that a specific person or group of people must sign off on a release before it makes into production.</span></span> <span data-ttu-id="391d6-371">Эти шлюзы позволяют проверять качество вручную, а также удовлетворять нормативным требованиям, связанным с контролем того, что происходит в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="391d6-371">These gates allow for manual quality checks and also for compliance with any regulatory requirements related to control what goes into production.</span></span>

### <a name="everybody-gets-a-build-pipeline"></a><span data-ttu-id="391d6-372">Все получают конвейер сборки</span><span class="sxs-lookup"><span data-stu-id="391d6-372">Everybody gets a build pipeline</span></span>

<span data-ttu-id="391d6-373">Настройка многих конвейеров сборки не взимается, поэтому рекомендуется иметь хотя бы один конвейер сборки для каждой микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="391d6-373">There's no cost to configuring many build pipelines, so it's advantageous to have at least one build pipeline per microservice.</span></span> <span data-ttu-id="391d6-374">В идеале микрослужбы можно развертывать независимо в любой среде, чтобы каждый из них мог быть выпущен через собственный конвейер, не освобождая массу несвязанного кода.</span><span class="sxs-lookup"><span data-stu-id="391d6-374">Ideally, microservices are independently deployable to any environment so having each one able to be released via its own pipeline without releasing a mass of unrelated code is perfect.</span></span> <span data-ttu-id="391d6-375">Каждый конвейер может иметь свой собственный набор утверждений, позволяющих использовать варианты в процессе сборки для каждой службы.</span><span class="sxs-lookup"><span data-stu-id="391d6-375">Each pipeline can have its own set of approvals allowing for variations in build process for each service.</span></span>

### <a name="versioning-releases"></a><span data-ttu-id="391d6-376">Версии выпусков</span><span class="sxs-lookup"><span data-stu-id="391d6-376">Versioning releases</span></span>

<span data-ttu-id="391d6-377">Недостаток использования функций выпусков заключается в том, что он не может быть определен в возвращенном `azure-pipelines.yml` файле.</span><span class="sxs-lookup"><span data-stu-id="391d6-377">One drawback to using the Releases functionality is that it can't be defined in a checked-in `azure-pipelines.yml` file.</span></span> <span data-ttu-id="391d6-378">Существует множество причин, из-за которых определения выпуска для каждой ветви включают в себя скелет выпуска в шаблоне проекта.</span><span class="sxs-lookup"><span data-stu-id="391d6-378">There are many reasons you might want to do that from having per-branch release definitions to including a release skeleton in your project template.</span></span> <span data-ttu-id="391d6-379">К счастью, работа выполняется для сдвига некоторых этапов поддержки в компонент сборки.</span><span class="sxs-lookup"><span data-stu-id="391d6-379">Fortunately, work is ongoing to shift some of the stages support into the Build component.</span></span> <span data-ttu-id="391d6-380">Это будет известно как многоэтапная сборка, и [теперь доступна первая версия](https://devblogs.microsoft.com/devops/whats-new-with-azure-pipelines/).</span><span class="sxs-lookup"><span data-stu-id="391d6-380">This will be known as multi-stage build and the [first version is available now](https://devblogs.microsoft.com/devops/whats-new-with-azure-pipelines/)!</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="391d6-381">[Назад](azure-security.md)
>[Вперед](feature-flags.md)</span><span class="sxs-lookup"><span data-stu-id="391d6-381">[Previous](azure-security.md)
[Next](feature-flags.md)</span></span>
