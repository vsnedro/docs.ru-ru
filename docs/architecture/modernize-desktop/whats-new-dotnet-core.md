---
title: Новые возможности .NET Core для классических приложений
description: Узнайте о .NET Core, различиях между .NET Core и .NET Framework, а также о новых функциях, которые были добавлены.
ms.date: 05/12/2020
ms.openlocfilehash: 796facaf8cd4f0d23fbcd04b90cb78fb28ebc465
ms.sourcegitcommit: 67ebdb695fd017d79d9f1f7f35d145042d5a37f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "97866787"
---
# <a name="whats-new-with-net-core-for-desktop"></a>Новые возможности .NET Core для классических приложений

Начиная с .NET Core 3,0, платформа .NET Core поддерживает Windows Forms и WPF. Итак, теперь у вас есть возможность выбора между .NET Framework и .NET Core для настольных приложений. В этой главе описывается, что такое .NET Core и каковы преимущества для настольных приложений.

## <a name="the-motivation-behind-net-core"></a>Мотивация .NET Core

С момента запуска в 2002 .NET Framework соработала несколько лет для поддержки многих технологий, таких как Windows Forms, ASP.NET, Entity Framework, Магазин Windows и многие другие. По сути, все они различаются. Таким образом, корпорация Майкрософт была подходить к этой эволюции, потратив части .NET Framework и создавая различные стеки приложений для каждой технологии. Таким образом, возможности разработки можно настроить для нужд конкретного стека, что максимально увеличивает потенциал каждой платформы. Это приводит к фрагментации версий .NET Framework, обслуживаемых различными независимыми командами. Все эти стеки имеют общую структуру, содержащую модель приложения, платформу и среду выполнения, но они отличаются реализацией каждой из этих частей.

Если вы нацелены только на одну из этих платформ, можно использовать эту модель. Однако во многих случаях может потребоваться более одной целевой платформы в одном решении. Например, приложение может иметь часть администратора рабочего стола, веб-сайт клиента, который использует серверную логику, работающую на сервере, и даже мобильный клиент. В этом случае вам потребуется унифицированный код, который может охватывать все эти вертикальные возможности .NET.

К моменту выпуска Windows 8 была создана концепция переносимых библиотек классов (PCL). Первоначально .NET Framework была разработана с учетом предположения, что оно всегда было бы развернуто как единое целое, поэтому разделение не является важным [фактором](https://wikipedia.org/wiki/Decomposition_(computer_science)) . Для решения проблемы совместного использования кода в разных вертикальных чертах, принудительная сила была в порядке рефакторинга платформы. Идея контрактов заключается в предоставлении хорошо организованной контактной зоны API. Контракты — это просто сборки, которые компилируются в и спроектированы с учетом правильного факторинга зависимостей между ними.

Это приводит к посвящению различий API между вертикальными элементами на уровне сборки, а не по отдельному уровню API, который мы использовали ранее. Этот аспект включает работу с библиотекой классов, которая может ориентироваться на несколько вертикальных, также известных как переносимые библиотеки классов.

![Журнал выпусков .NET Framework](./media/whats-new-dotnet-core/release-history.png)

При использовании PCL процесс разработки унифицирован по вертикали на основе формы API. Кроме того, устранена необходимость в создании библиотек, выполняющихся на разных вертикальных линиях. Но есть отличная проблема: API-интерфейсы переносимы, только если реализация перемещается по всем вертикальным линиям.

Лучшим подходом является унификация реализаций по вертикали, предоставляя хорошо организованную реализацию вместо хорошо организованного представления. Гораздо проще попросить каждой из команд, владеющих конкретным компонентом, подумать о том, как их интерфейсы API работают на всех вертикальных чертах, чем при попытке задним числом обеспечить последовательный стек API. Именно здесь .NET Standard входит в. См. сведения в следующем разделе.

Еще одна большая сложность связана с развертыванием .NET Framework. .NET Framework является платформой на уровне компьютера. Любые изменения, внесенные в него, влияют на все приложения, которые зависят от него. Хотя эта модель развертывания имеет множество преимуществ, например, уменьшение дискового пространства и централизованного доступа к службам, она представляет некоторые ошибки.

Для начала разработчикам приложений не нужно зависеть от недавно выпущенной платформы. Они либо должны принять зависимость от последней ОС, либо предоставить установщик приложения, который устанавливает .NET Framework вместе с приложением. Если вы являетесь веб-разработчиком, вы можете даже не использовать этот параметр, так как отдел ИТ устанавливает поддерживаемую версию сервера.

Даже если вы хотите устранить неполадки, связанные с предоставлением установщика для создания цепочки в .NET Framework установки, может оказаться, что обновление .NET Framework может привести к нарушению работы других приложений.

Несмотря на усилия по обеспечению обратной совместимости версий платформы, существуют совместимые изменения, которые могут нарушить работу приложений. Например, Добавление интерфейса в существующий тип может изменить способ сериализации этого типа и привести к нарушению проблем в зависимости от существующего кода. Так как базовая платформа, установленная на платформе .NET Framework, является огромной, борьба за эти критические ситуации замедляет скорость инноваций в .NET Framework.

Чтобы решить все эти проблемы, корпорация Майкрософт разработала .NET Core, чтобы подходить к эволюции платформы .NET.

## <a name="introduction-to-net-core"></a>Введение в .NET Core

.NET Core — это эволюция технологий Microsoft .NET в виде модульной, кросс-платформенной и облачной платформы с открытым исходным кодом. Он работает в Windows, macOS и Linux с планами для работы в архитектурах на базе ARM, таких как Android и IoT.

Целью .NET Core является обеспечение единой платформы для всех типов приложений, включая Windows, кросс-платформенные и мобильные приложения. [.NET Standard](../../standard/net-standard.md) обеспечивает это, предоставляя общие базовые API, которые необходимы для каждой модели приложений, и исключая API для конкретной модели приложения.

Эта платформа предоставляет приложениям множество преимуществ с точки зрения эффективности и производительности, упрощая упаковку и развертывание на разных поддерживаемых платформах.

Преимущества .NET Core поступают из следующих трех характеристик:

- **Кросс-платформенные:** Это позволяет выполнять приложения на разных платформах (Windows, macOS и Linux).
- **Открытый исходный код.** платформа .NET Core — это открытый исходный код, который можно получить с помощью GitHub, что способствует прозрачности и вкладам сообщества.
- **Поддерживается:** Корпорация Майкрософт официально поддерживает .NET Core.

Начиная с .NET Core 3,0, помимо существующей поддержки для Интернета и облака, также поддерживаются домены для настольных систем, Интернета вещей и ИИ. Цель этой платформы — это впечатляющий выбор для каждого типа разработки .NET, представленного и будущего. Корпорация Майкрософт планирует выполнить эту концепцию с помощью .NET 5 в конце 2020. Имя "Core" было удалено, чтобы усилить его уникальность в мире .NET.

![Все домены .NET 5](./media/whats-new-dotnet-core/all-domains-of-dotnet5.png)

## <a name="net-framework-vs-net-core"></a>Сравнение .NET Framework и .NET Core

Итак, теперь, когда вы понимаете релевантность .NET Core в рамках стратегии Майкрософт для .NET, вам может быть интересно, что происходит с .NET Framework. Вы можете запрашивать такие вопросы: нужно ли его отменять? Будет ли она исчезать? Каковы варианты модернизировать приложений, на .NET Framework?

В 2019 была выпущена последняя версия **.NET Framework-4,8** . Он включал три основных улучшения для настольных приложений:

- **Современные элементы управления браузера и мультимедиа**. на сегодняшний день приложения для настольных систем .NET используют Internet Explorer и проигрыватель Windows Media для отображения файлов мультимедиа и воспроизведения в формате HTML. Поскольку в этих устаревших элементах управления не отображается последняя версия HTML или воспроизводятся последние файлы мультимедиа, были добавлены новые элементы управления, использующие преимущества Microsoft ребра и новые проигрыватели мультимедиа, которые поддерживают новейшие стандарты.
- **Доступ к элементам управления UWP**. UWP содержит новые элементы управления, которые используют новейшие функции Windows и сенсорные экраны. Вам не придется переписывать приложения, чтобы использовать эти новые функции и элементы управления, поэтому вы можете использовать эти новые функции в существующем коде WPF или Windows Forms.
- **Улучшения при высоком уровне dpi**: разрешение дисплеев увеличивается до 4 КБ и 8 КБ разрешений. Таким образом, .NET Framework 4,8 добавляет новые усовершенствования HDPI, чтобы убедиться, что существующие приложения Windows Forms и WPF на этих новых дисплеях могут выглядеть великолепно.

Поскольку .NET Framework установлена на миллионах компьютеров, корпорация Майкрософт будет по-прежнему поддерживать ее, но не добавит новые функции.

.NET Core — это версия .NET с открытым исходным кодом, кросс-платформенная и быстрая. Из-за своего параллельного использования он может принимать изменения, не заботясь о нарушениях работы любого приложения. Это означает, что .NET Core будет получать новые интерфейсы API и языковые возможности с течением времени, .NET Framework не будет. Кроме того, в **.NET Core** уже есть функции, которые были бы невозможными для .NET Framework, например:

- **Параллельные версии .NET, поддерживающие Windows Forms и WPF**: это решает проблему побочных эффектов при обновлении версии платформы компьютера. На одном компьютере можно установить несколько версий .NET Core, и каждое приложение указывает, какая версия .NET Core должна использоваться. Еще больше, теперь вы можете разрабатывать и запускать Windows Forms и WPF на основе .NET Core.
- **Внедрение .NET непосредственно в приложение**. .NET Core можно развернуть как часть пакета приложения. Это позволяет использовать преимущества последней версии, функций и интерфейсов API без ожидания установки на компьютере определенной версии.
- **Воспользуйтесь преимуществами функций .NET Core**: платформа .NET Core — это быстрая перемотка к версии .NET. Его параллельная природа позволяет быстро ознакомиться с новыми инновационными API и улучшениями библиотек базовых классов (BCL) без риска нарушения совместимости. Теперь Windows Forms и приложения WPF могут воспользоваться новейшими функциями .NET Core, которые также включают в себя более фундаментальные исправления для производительности среды выполнения, поддержки высокого DPI и т. д.

Основная часть плана развития корпорации Майкрософт заключается в упрощении переноса приложений на .NET Core и в будущем на .NET 5. Но если у вас уже есть .NET Framework приложения, вы не должны было перейти на .NET Core. .NET Framework будет полностью поддерживаться и всегда будет частью Windows. Однако если вы хотите использовать новейшие функции языка и API в будущем, вам потребуется перенести приложения в .NET Core.

Для новых настольных приложений мы рекомендуем начать с .NET Core напрямую. Это упрощенная и перекрестная платформа, работает параллельно, имеет высокую производительность и идеально подходит для контейнеров и архитектур микрослужб.

![Вы можете обновить .NET Framework приложения с помощью последней версии .NET Framework или перенести приложения в .NET Core.](./media/whats-new-dotnet-core/framework-vs-core.png)

## <a name="net-standard-vs-pcl"></a>.NET Standard и PCL

[.NET Standard](../../standard/net-standard.md) — это официальная спецификация API .NET, которые должны быть доступны во всех реализациях .NET. .NET Standard используется для обеспечения согласованности экосистемы .NET. .NET Standard — это спецификация API-интерфейсов .NET, которые составляют унифицированный набор контрактов для компиляции кода. Эти контракты реализуются в каждой разновидности .NET, что обеспечивает возможность переноса в различных реализациях .NET.

.NET Standard предоставляет следующие важные возможности:

- Определяет универсальный набор API библиотек базовых классов для реализации всех реализаций .NET независимо от рабочей нагрузки.
- Позволяет разработчикам создавать переносимые библиотеки, которые могут использоваться в разных реализациях .NET, с помощью одного набора API-интерфейсов.

.NET Standard является развитием PCL, и в следующем списке показаны фундаментальные различия между .NET Standard и PCL.

- .NET Standard — это набор проверенных API-интерфейсов, подобранных корпорацией Майкрософт. PCL нет.
- Интерфейсы API, которые содержит PCL, зависят от платформ, выбранных для создания. Это позволяет использовать PCL только для выбранных целевых объектов.
- .NET Standard не зависит от платформы, она может работать где угодно, в Windows, macOS, Linux и т. д.
- PCL также может работать на разных платформах, но они имеют более ограниченный доступ. PCL может быть предназначен только для ограниченного набора платформ.

## <a name="new-desktop-features-in-net-core"></a>Новые функции рабочего стола в .NET Core

### <a name="support-for-windows-forms-and-wpf"></a>Поддержка Windows Forms и WPF

Windows Forms и WPF являются частью .NET Core начиная с версии 3,0. Обе платформы представления предназначены только для Windows, поэтому они не пересекаются. WPF можно представить как богатый уровень по сравнению с DirectX и Windows Forms как более тонкий уровень по отношению к GDI+. WPF и Windows Forms выявляют большую часть функциональности настольных приложений в Windows. Таким образом, Windows Forms и WPF доступны для .NET Core и .NET Framework. Теперь вы можете запустить новые приложения для настольных компьютеров, предназначенные для .NET Core, и перенести существующие из .NET Framework в .NET Core.

Новая версия .NET Standard версии 2,1 была выпущена в то же время, что и .NET Core 3,0. Как и ожидалось, версии .NET Core 3. x поддерживают .NET Standard 2,1 и более ранних версий.

Также важно отметить, что как Windows Forms, так и реализации WPF для .NET Core являются открытыми версиями.

### <a name="xaml-islands"></a>XAML Islands

[Острова XAML](/windows/apps/desktop/modernize/xaml-islands) — это набор компонентов для разработчиков, которые могут использовать новые элементы управления Windows 10 (элементы управления XAML UWP) в своих текущих WPF, Windows Forms и собственных приложениях Win32 (например, MFC). Вы можете иметь "острова" элементов управления класса UWP в любом месте, где бы вы ни находились внутри приложений Win32.

Эти острова XAML возможны, поскольку в Windows 10 версии 1903 появился набор API-интерфейсов, позволяющих размещать содержимое XAML UWP в Windows Win32 с помощью обработчиков Windows (HWnd). Обратите внимание, что только приложения, работающие в Windows 10 1903 и более поздних версий, могут использовать острова XAML.

Чтобы упростить создание островов XAML для разработчиков Windows Forms и WPF, в наборе средств Windows Community Toolkit появился набор оболочек .NET в нескольких пакетах NuGet. Эти оболочки являются элементами управления с оболочкой и размещением:

- Элементы управления [WebView](/windows/communitytoolkit/controls/wpf-winforms/webview), [вебвиевкомпатибле](/windows/communitytoolkit/controls/wpf-winforms/webviewcompatible), [InkCanvas](/windows/communitytoolkit/controls/wpf-winforms/inkcanvas), [медиаплайерелемент](/windows/communitytoolkit/controls/wpf-winforms/mediaplayerelement)и [MapControl](/windows/communitytoolkit/controls/wpf-winforms/mapcontrol) заключают некоторые элементы управления XAML UWP в Windows Forms или элементы управления WPF, скрывая основные понятия UWP для этих разработчиков.
- Элемент управления [виндовсксамлхост](/windows/communitytoolkit/controls/wpf-winforms/windowsxamlhost) для Windows Forms и WPF позволяет загружать другие неупакованные элементы управления XAML UWP и пользовательские элементы управления в остров XAML.

### <a name="access-to-all-windows-10-apis"></a>Доступ ко всем интерфейсам API Windows 10

Windows 10 обладает большим количеством API, с которыми разработчики могут работать. Эти API предоставляют доступ к широкому спектру таких функций, как проверка подлинности, Bluetooth, встречи и контакты. Теперь эти API-интерфейсы предоставляются через .NET Core и предоставляют разработчикам Windows возможность создавать мощные приложения для настольных систем, использующие возможности, представленные в Windows 10.

### <a name="side-by-side-support-and-self-contained-exes"></a>Параллельная поддержка и автономные exe-файлы

Модель развертывания .NET Core является одним из крупнейших преимуществ, с которыми разработчики настольных систем Windows будут работать с .NET Core. Возможность глобально установить .NET Core обеспечивает большую часть тех же основных преимуществ при установке и обслуживании .NET Framework, но не требует наличия обновлений на месте.

При выпуске новой версии .NET Core можно обновить каждое приложение на компьютере, не затрагивая другие приложения. Новые версии .NET Core устанавливаются в их собственных каталогах и находятся рядом друг с другом.

Если необходимо выполнить развертывание с изоляцией, можно развернуть .NET Core с приложением. .NET Core будет объединять приложение с средой выполнения .NET Core, как в одном исполняемом файле.

Эти варианты развертывания были запрошены разработчиками очень давно, но их сложно добиться с помощью .NET Framework. Модульная архитектура, используемая .NET Core, делает возможными гибкие варианты развертывания.

### <a name="performance"></a>Производительность

С момента запуска, нацеленного на веб-и облачные рабочие нагрузки, в .NET Core была установлена производительность ДНК. Код на стороне сервера должен быть достаточно производительен для выполнения сценариев с высоким уровнем параллелизма и оценки .NET Core сегодня в качестве высокопроизводительной веб-платформы на рынке.

Вы можете воспользоваться преимуществами этих улучшений производительности при использовании .NET Core для создания приложений нового поколения для настольных систем.

## <a name="benefits-of-open-source"></a>Преимущества открытого источника

Всего несколько слов о том, что .NET Core является открытым исходным кодом. Создание кросс-платформенного стека является сложной задачей, требующей взаимодействия специализированных команд на каждой из целевых платформ. Это требует значительной совместной работы внутри и за пределами корпорации Майкрософт. Делая его открытым и открытым для совместной работы, вы получаете окончательную динамическую разработку стиля разработки, вызывая линейку качества, поскольку проблемы обнаруживаются огромным и активным сообществом разработчиков.

Это ключевой коэффициент успеха в .NET Core, который будет продолжать ускорить работу ранее описанной стратегии: как единая платформа .NET, которую любой разработчик когда-либо должен будет создавать любое приложение.

>[!div class="step-by-step"]
>[Назад](why-modern-applications.md)
>[Вперед](migrate-modern-applications.md)
